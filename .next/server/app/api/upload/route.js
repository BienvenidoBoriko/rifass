"use strict";(()=>{var e={};e.id=5998,e.ids=[5998],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},67375:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>f});var a={};t.r(a),t.d(a,{POST:()=>d});var o=t(70101),s=t(90796),i=t(83055),p=t(12903);let n=require("fs/promises");var u=t(55315),l=t(92048);async function d(e){try{let r=(await e.formData()).get("file");if(!r)return p.NextResponse.json({error:"No file provided"},{status:400});if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(r.type))return p.NextResponse.json({error:"Invalid file type. Only JPG, PNG, and WEBP are allowed."},{status:400});if(r.size>5242880)return p.NextResponse.json({error:"File too large. Maximum size is 5MB."},{status:400});let t=(0,u.join)(process.cwd(),"public","uploads");(0,l.existsSync)(t)||await (0,n.mkdir)(t,{recursive:!0});let a=(0,u.join)(t,"payment-proofs");(0,l.existsSync)(a)||await (0,n.mkdir)(a,{recursive:!0});let o=Date.now(),s=Math.random().toString(36).substring(2,15),i=r.name.split(".").pop(),d=`payment-proof-${o}-${s}.${i}`,m=(0,u.join)(a,d),c=await r.arrayBuffer(),f=Buffer.from(c);await (0,n.writeFile)(m,f);let x=`/uploads/payment-proofs/${d}`;return p.NextResponse.json({success:!0,url:x,fileName:d})}catch(e){return console.error("File upload error:",e),p.NextResponse.json({error:"Failed to upload file"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\Users\\BIENV\\Downloads\\auth-system\\app\\api\\upload\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:f,serverHooks:x}=m,g="/api/upload/route";function v(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:f})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[9780,332],()=>t(67375));module.exports=a})();