"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/raffles/purchase/route";
exports.ids = ["app/api/raffles/purchase/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "./action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fraffles%2Fpurchase%2Froute&page=%2Fapi%2Fraffles%2Fpurchase%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fraffles%2Fpurchase%2Froute.ts&appDir=C%3A%5CUsers%5CBIENV%5CDownloads%5Cauth-system%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBIENV%5CDownloads%5Cauth-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fraffles%2Fpurchase%2Froute&page=%2Fapi%2Fraffles%2Fpurchase%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fraffles%2Fpurchase%2Froute.ts&appDir=C%3A%5CUsers%5CBIENV%5CDownloads%5Cauth-system%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBIENV%5CDownloads%5Cauth-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_BIENV_Downloads_auth_system_app_api_raffles_purchase_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/raffles/purchase/route.ts */ \"(rsc)/./app/api/raffles/purchase/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/raffles/purchase/route\",\n        pathname: \"/api/raffles/purchase\",\n        filename: \"route\",\n        bundlePath: \"app/api/raffles/purchase/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\BIENV\\\\Downloads\\\\auth-system\\\\app\\\\api\\\\raffles\\\\purchase\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_BIENV_Downloads_auth_system_app_api_raffles_purchase_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/raffles/purchase/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjE2X3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX19yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGcmFmZmxlcyUyRnB1cmNoYXNlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZyYWZmbGVzJTJGcHVyY2hhc2UlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZyYWZmbGVzJTJGcHVyY2hhc2UlMkZyb3V0ZS50cyZhcHBEaXI9QyUzQSU1Q1VzZXJzJTVDQklFTlYlNUNEb3dubG9hZHMlNUNhdXRoLXN5c3RlbSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDQklFTlYlNUNEb3dubG9hZHMlNUNhdXRoLXN5c3RlbSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDK0I7QUFDNUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Lz9kMjJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEJJRU5WXFxcXERvd25sb2Fkc1xcXFxhdXRoLXN5c3RlbVxcXFxhcHBcXFxcYXBpXFxcXHJhZmZsZXNcXFxccHVyY2hhc2VcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3JhZmZsZXMvcHVyY2hhc2Uvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9yYWZmbGVzL3B1cmNoYXNlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yYWZmbGVzL3B1cmNoYXNlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcQklFTlZcXFxcRG93bmxvYWRzXFxcXGF1dGgtc3lzdGVtXFxcXGFwcFxcXFxhcGlcXFxccmFmZmxlc1xcXFxwdXJjaGFzZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcmFmZmxlcy9wdXJjaGFzZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fraffles%2Fpurchase%2Froute&page=%2Fapi%2Fraffles%2Fpurchase%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fraffles%2Fpurchase%2Froute.ts&appDir=C%3A%5CUsers%5CBIENV%5CDownloads%5Cauth-system%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBIENV%5CDownloads%5Cauth-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/raffles/purchase/route.ts":
/*!*******************************************!*\
  !*** ./app/api/raffles/purchase/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/.pnpm/next-auth@4.24.11_@auth+cor_9813468dafc1c7a8c7f551d5504c0142/node_modules/next-auth/next/index.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./lib/email.ts\");\n\n\n\n\n\nasync function POST(request) {\n    // Check authentication\n    const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n    if (!session?.user?.email) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    try {\n        const body = await request.json();\n        const { raffleId, ticketNumbers, paymentMethod, paymentReference, paymentProof, paymentComment } = body;\n        // Get raffle details\n        const raffle = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.raffle.findUnique({\n            where: {\n                id: raffleId\n            },\n            select: {\n                id: true,\n                title: true,\n                pricePerTicket: true,\n                status: true,\n                endDate: true\n            }\n        });\n        if (!raffle) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Raffle not found\"\n            }, {\n                status: 404\n            });\n        }\n        if (raffle.status !== \"active\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Raffle is not active\"\n            }, {\n                status: 400\n            });\n        }\n        if (new Date() > raffle.endDate) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Raffle has ended\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if tickets are available\n        const existingTickets = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.ticket.findMany({\n            where: {\n                raffleId,\n                ticketNumber: {\n                    in: ticketNumbers\n                },\n                paymentStatus: {\n                    in: [\n                        \"confirmed\",\n                        \"pending\"\n                    ]\n                }\n            }\n        });\n        if (existingTickets.length > 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Some tickets are already taken\"\n            }, {\n                status: 409\n            });\n        }\n        const totalAmount = ticketNumbers.length * Number(raffle.pricePerTicket);\n        const ticketIds = [];\n        // Insert tickets using authenticated user data\n        for (const ticketNumber of ticketNumbers){\n            const ticket = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.ticket.create({\n                data: {\n                    raffleId,\n                    ticketNumber,\n                    buyerName: session.user.name || \"\",\n                    buyerPhone: \"\",\n                    buyerEmail: session.user.email,\n                    buyerCountry: \"\",\n                    buyerCity: \"\",\n                    paymentMethod,\n                    paymentReference,\n                    paymentProof,\n                    paymentComment,\n                    amountPaid: totalAmount\n                }\n            });\n            ticketIds.push(ticket.id);\n        }\n        // Send email notification to user\n        try {\n            await _lib_email__WEBPACK_IMPORTED_MODULE_4__.emailService.sendTicketPurchaseConfirmation({\n                buyerName: session.user.name || \"\",\n                buyerEmail: session.user.email,\n                raffleTitle: raffle.title,\n                ticketNumbers,\n                totalAmount,\n                paymentMethod\n            });\n        } catch (emailError) {\n            console.error(\"Error sending email notification:\", emailError);\n        // Don't fail the purchase if email fails\n        }\n        // Send admin notification\n        try {\n            await _lib_email__WEBPACK_IMPORTED_MODULE_4__.emailService.sendAdminNotification(\"Nueva Compra de Boletos\", `\r\n        <h3>Nueva compra realizada:</h3>\r\n        <ul>\r\n          <li><strong>Usuario:</strong> ${session.user.name} (${session.user.email})</li>\r\n          <li><strong>Rifa:</strong> ${raffle.title}</li>\r\n          <li><strong>Boletos:</strong> ${ticketNumbers.map((num)=>num.toString().padStart(4, \"0\")).join(\", \")}</li>\r\n          <li><strong>Método de pago:</strong> ${paymentMethod}</li>\r\n          <li><strong>Total:</strong> $${totalAmount}</li>\r\n          <li><strong>Referencia:</strong> ${paymentReference || \"No proporcionada\"}</li>\r\n        </ul>\r\n        `);\n        } catch (adminEmailError) {\n            console.error(\"Error sending admin notification:\", adminEmailError);\n        // Don't fail the purchase if admin email fails\n        }\n        const response = {\n            success: true,\n            ticketIds,\n            totalAmount\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error(\"Error purchasing tickets:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxZQUFZckMsUUFBUUMsSUFBSSxDQUFDQyxLQUFLO2dCQUM5QnlDLGFBQWE5QixPQUFPSyxLQUFLO2dCQUN6QlY7Z0JBQ0FxQjtnQkFDQXBCO1lBQ0Y7UUFDRixFQUFFLE9BQU9tQyxZQUFZO1lBQ25CQyxRQUFRekMsS0FBSyxDQUFDLHFDQUFxQ3dDO1FBQ25ELHlDQUF5QztRQUMzQztRQUVBLDBCQUEwQjtRQUMxQixJQUFJO1lBQ0YsTUFBTS9DLG9EQUFZQSxDQUFDaUQscUJBQXFCLENBQ3RDLDJCQUNBLENBQUM7Ozt3Q0FHK0IsRUFBRTlDLFFBQVFDLElBQUksQ0FBQ2tDLElBQUksQ0FBQyxFQUFFLEVBQUVuQyxRQUFRQyxJQUFJLENBQUNDLEtBQUssQ0FBQztxQ0FDOUMsRUFBRVcsT0FBT0ssS0FBSyxDQUFDO3dDQUNaLEVBQUVWLGNBQWN1QyxHQUFHLENBQUNDLENBQUFBLE1BQU9BLElBQUlDLFFBQVEsR0FBR0MsUUFBUSxDQUFDLEdBQUcsTUFBTUMsSUFBSSxDQUFDLE1BQU07K0NBQ2hFLEVBQUUxQyxjQUFjO3VDQUN4QixFQUFFb0IsWUFBWTsyQ0FDVixFQUFFbkIsb0JBQW9CLG1CQUFtQjs7UUFFNUUsQ0FBQztRQUVMLEVBQUUsT0FBTzBDLGlCQUFpQjtZQUN4QlAsUUFBUXpDLEtBQUssQ0FBQyxxQ0FBcUNnRDtRQUNuRCwrQ0FBK0M7UUFDakQ7UUFFQSxNQUFNQyxXQUFvQztZQUN4Q0MsU0FBUztZQUNUdkI7WUFDQUY7UUFDRjtRQUVBLE9BQU9wQyxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDa0Q7SUFDM0IsRUFBRSxPQUFPakQsT0FBTztRQUNkeUMsUUFBUXpDLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9YLHFEQUFZQSxDQUFDVSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vYXBwL2FwaS9yYWZmbGVzL3B1cmNoYXNlL3JvdXRlLnRzPzdkMzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XHJcbmltcG9ydCB0eXBlIHtcclxuICBQdXJjaGFzZVRpY2tldHNSZXF1ZXN0LFxyXG4gIFB1cmNoYXNlVGlja2V0c1Jlc3BvbnNlLFxyXG59IGZyb20gXCJAL2xpYi90eXBlc1wiO1xyXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aC9uZXh0XCI7XHJcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSBcIkAvbGliL2F1dGhcIjtcclxuaW1wb3J0IHsgZW1haWxTZXJ2aWNlIH0gZnJvbSBcIkAvbGliL2VtYWlsXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIC8vIENoZWNrIGF1dGhlbnRpY2F0aW9uXHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xyXG4gIGlmICghc2Vzc2lvbj8udXNlcj8uZW1haWwpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keTogUHVyY2hhc2VUaWNrZXRzUmVxdWVzdCA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgY29uc3QgeyByYWZmbGVJZCwgdGlja2V0TnVtYmVycywgcGF5bWVudE1ldGhvZCwgcGF5bWVudFJlZmVyZW5jZSwgcGF5bWVudFByb29mLCBwYXltZW50Q29tbWVudCB9ID0gYm9keTtcclxuXHJcbiAgICAvLyBHZXQgcmFmZmxlIGRldGFpbHNcclxuICAgIGNvbnN0IHJhZmZsZSA9IGF3YWl0IHByaXNtYS5yYWZmbGUuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiByYWZmbGVJZCB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICB0aXRsZTogdHJ1ZSxcclxuICAgICAgICBwcmljZVBlclRpY2tldDogdHJ1ZSxcclxuICAgICAgICBzdGF0dXM6IHRydWUsXHJcbiAgICAgICAgZW5kRGF0ZTogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmFmZmxlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlJhZmZsZSBub3QgZm91bmRcIiB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyYWZmbGUuc3RhdHVzICE9PSBcImFjdGl2ZVwiKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBcIlJhZmZsZSBpcyBub3QgYWN0aXZlXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmV3IERhdGUoKSA+IHJhZmZsZS5lbmREYXRlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlJhZmZsZSBoYXMgZW5kZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHRpY2tldHMgYXJlIGF2YWlsYWJsZVxyXG4gICAgY29uc3QgZXhpc3RpbmdUaWNrZXRzID0gYXdhaXQgcHJpc21hLnRpY2tldC5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgcmFmZmxlSWQsXHJcbiAgICAgICAgdGlja2V0TnVtYmVyOiB7XHJcbiAgICAgICAgICBpbjogdGlja2V0TnVtYmVycyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBheW1lbnRTdGF0dXM6IHtcclxuICAgICAgICAgIGluOiBbXCJjb25maXJtZWRcIiwgXCJwZW5kaW5nXCJdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXhpc3RpbmdUaWNrZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IFwiU29tZSB0aWNrZXRzIGFyZSBhbHJlYWR5IHRha2VuXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDA5IH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b3RhbEFtb3VudCA9IHRpY2tldE51bWJlcnMubGVuZ3RoICogTnVtYmVyKHJhZmZsZS5wcmljZVBlclRpY2tldCk7XHJcbiAgICBjb25zdCB0aWNrZXRJZHM6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgLy8gSW5zZXJ0IHRpY2tldHMgdXNpbmcgYXV0aGVudGljYXRlZCB1c2VyIGRhdGFcclxuICAgIGZvciAoY29uc3QgdGlja2V0TnVtYmVyIG9mIHRpY2tldE51bWJlcnMpIHtcclxuICAgICAgY29uc3QgdGlja2V0ID0gYXdhaXQgcHJpc21hLnRpY2tldC5jcmVhdGUoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHJhZmZsZUlkLFxyXG4gICAgICAgICAgdGlja2V0TnVtYmVyLFxyXG4gICAgICAgICAgYnV5ZXJOYW1lOiBzZXNzaW9uLnVzZXIubmFtZSB8fCBcIlwiLFxyXG4gICAgICAgICAgYnV5ZXJQaG9uZTogXCJcIixcclxuICAgICAgICAgIGJ1eWVyRW1haWw6IHNlc3Npb24udXNlci5lbWFpbCxcclxuICAgICAgICAgIGJ1eWVyQ291bnRyeTogXCJcIixcclxuICAgICAgICAgIGJ1eWVyQ2l0eTogXCJcIixcclxuICAgICAgICAgIHBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICBwYXltZW50UmVmZXJlbmNlLFxyXG4gICAgICAgICAgcGF5bWVudFByb29mLFxyXG4gICAgICAgICAgcGF5bWVudENvbW1lbnQsXHJcbiAgICAgICAgICBhbW91bnRQYWlkOiB0b3RhbEFtb3VudCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRpY2tldElkcy5wdXNoKHRpY2tldC5pZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2VuZCBlbWFpbCBub3RpZmljYXRpb24gdG8gdXNlclxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRUaWNrZXRQdXJjaGFzZUNvbmZpcm1hdGlvbih7XHJcbiAgICAgICAgYnV5ZXJOYW1lOiBzZXNzaW9uLnVzZXIubmFtZSB8fCBcIlwiLFxyXG4gICAgICAgIGJ1eWVyRW1haWw6IHNlc3Npb24udXNlci5lbWFpbCxcclxuICAgICAgICByYWZmbGVUaXRsZTogcmFmZmxlLnRpdGxlLFxyXG4gICAgICAgIHRpY2tldE51bWJlcnMsXHJcbiAgICAgICAgdG90YWxBbW91bnQsXHJcbiAgICAgICAgcGF5bWVudE1ldGhvZCxcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlbWFpbEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZW5kaW5nIGVtYWlsIG5vdGlmaWNhdGlvbjpcIiwgZW1haWxFcnJvcik7XHJcbiAgICAgIC8vIERvbid0IGZhaWwgdGhlIHB1cmNoYXNlIGlmIGVtYWlsIGZhaWxzXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2VuZCBhZG1pbiBub3RpZmljYXRpb25cclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGVtYWlsU2VydmljZS5zZW5kQWRtaW5Ob3RpZmljYXRpb24oXHJcbiAgICAgICAgXCJOdWV2YSBDb21wcmEgZGUgQm9sZXRvc1wiLFxyXG4gICAgICAgIGBcclxuICAgICAgICA8aDM+TnVldmEgY29tcHJhIHJlYWxpemFkYTo8L2gzPlxyXG4gICAgICAgIDx1bD5cclxuICAgICAgICAgIDxsaT48c3Ryb25nPlVzdWFyaW86PC9zdHJvbmc+ICR7c2Vzc2lvbi51c2VyLm5hbWV9ICgke3Nlc3Npb24udXNlci5lbWFpbH0pPC9saT5cclxuICAgICAgICAgIDxsaT48c3Ryb25nPlJpZmE6PC9zdHJvbmc+ICR7cmFmZmxlLnRpdGxlfTwvbGk+XHJcbiAgICAgICAgICA8bGk+PHN0cm9uZz5Cb2xldG9zOjwvc3Ryb25nPiAke3RpY2tldE51bWJlcnMubWFwKG51bSA9PiBudW0udG9TdHJpbmcoKS5wYWRTdGFydCg0LCAnMCcpKS5qb2luKCcsICcpfTwvbGk+XHJcbiAgICAgICAgICA8bGk+PHN0cm9uZz5Nw6l0b2RvIGRlIHBhZ286PC9zdHJvbmc+ICR7cGF5bWVudE1ldGhvZH08L2xpPlxyXG4gICAgICAgICAgPGxpPjxzdHJvbmc+VG90YWw6PC9zdHJvbmc+ICQke3RvdGFsQW1vdW50fTwvbGk+XHJcbiAgICAgICAgICA8bGk+PHN0cm9uZz5SZWZlcmVuY2lhOjwvc3Ryb25nPiAke3BheW1lbnRSZWZlcmVuY2UgfHwgJ05vIHByb3BvcmNpb25hZGEnfTwvbGk+XHJcbiAgICAgICAgPC91bD5cclxuICAgICAgICBgXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChhZG1pbkVtYWlsRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgYWRtaW4gbm90aWZpY2F0aW9uOlwiLCBhZG1pbkVtYWlsRXJyb3IpO1xyXG4gICAgICAvLyBEb24ndCBmYWlsIHRoZSBwdXJjaGFzZSBpZiBhZG1pbiBlbWFpbCBmYWlsc1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlOiBQdXJjaGFzZVRpY2tldHNSZXNwb25zZSA9IHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgdGlja2V0SWRzLFxyXG4gICAgICB0b3RhbEFtb3VudCxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHB1cmNoYXNpbmcgdGlja2V0czpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImVtYWlsU2VydmljZSIsIlBPU1QiLCJyZXF1ZXN0Iiwic2Vzc2lvbiIsInVzZXIiLCJlbWFpbCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImJvZHkiLCJyYWZmbGVJZCIsInRpY2tldE51bWJlcnMiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudFJlZmVyZW5jZSIsInBheW1lbnRQcm9vZiIsInBheW1lbnRDb21tZW50IiwicmFmZmxlIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJzZWxlY3QiLCJ0aXRsZSIsInByaWNlUGVyVGlja2V0IiwiZW5kRGF0ZSIsIkRhdGUiLCJleGlzdGluZ1RpY2tldHMiLCJ0aWNrZXQiLCJmaW5kTWFueSIsInRpY2tldE51bWJlciIsImluIiwicGF5bWVudFN0YXR1cyIsImxlbmd0aCIsInRvdGFsQW1vdW50IiwiTnVtYmVyIiwidGlja2V0SWRzIiwiY3JlYXRlIiwiZGF0YSIsImJ1eWVyTmFtZSIsIm5hbWUiLCJidXllclBob25lIiwiYnV5ZXJFbWFpbCIsImJ1eWVyQ291bnRyeSIsImJ1eWVyQ2l0eSIsImFtb3VudFBhaWQiLCJwdXNoIiwic2VuZFRpY2tldFB1cmNoYXNlQ29uZmlybWF0aW9uIiwicmFmZmxlVGl0bGUiLCJlbWFpbEVycm9yIiwiY29uc29sZSIsInNlbmRBZG1pbk5vdGlmaWNhdGlvbiIsIm1hcCIsIm51bSIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJqb2luIiwiYWRtaW5FbWFpbEVycm9yIiwicmVzcG9uc2UiLCJzdWNjZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/raffles/purchase/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"(rsc)/./node_modules/.pnpm/@next-auth+prisma-adapter@1_3df2e61e3bb8dcfa987abf9506de9bb7/node_modules/@next-auth/prisma-adapter/dist/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/.pnpm/next-auth@4.24.11_@auth+cor_9813468dafc1c7a8c7f551d5504c0142/node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/.pnpm/bcryptjs@3.0.2/node_modules/bcryptjs/index.js\");\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./lib/prisma.ts\");\n\n\n\n\nconst authOptions = {\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma),\n    secret: process.env.NEXTAUTH_SECRET,\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    throw new Error(\"Email y contrase\\xf1a son requeridos\");\n                }\n                // Validate email format\n                const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n                if (!emailRegex.test(credentials.email)) {\n                    throw new Error(\"Formato de email inv\\xe1lido\");\n                }\n                const user = await _prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email.toLowerCase()\n                    },\n                    select: {\n                        id: true,\n                        email: true,\n                        name: true,\n                        password: true,\n                        role: true\n                    }\n                });\n                if (!user) {\n                    throw new Error(\"No existe una cuenta con este email\");\n                }\n                if (!user.password) {\n                    throw new Error(\"Esta cuenta no tiene contrase\\xf1a configurada\");\n                }\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    throw new Error(\"Contrase\\xf1a incorrecta\");\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    role: user.role\n                };\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    pages: {\n        signIn: \"/login\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUN5RDtBQUNRO0FBQ3BDO0FBQ0k7QUFFMUIsTUFBTUksY0FBK0I7SUFDMUNDLFNBQVNMLHdFQUFhQSxDQUFDRywyQ0FBTUE7SUFDN0JHLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtJQUNuQ0MsV0FBVztRQUNUVCwyRUFBbUJBLENBQUM7WUFDbEJVLE1BQU07WUFDTkMsYUFBYTtnQkFDWEMsT0FBTztvQkFBRUMsT0FBTztvQkFBU0MsTUFBTTtnQkFBUTtnQkFDdkNDLFVBQVU7b0JBQUVGLE9BQU87b0JBQVlDLE1BQU07Z0JBQVc7WUFDbEQ7WUFDQSxNQUFNRSxXQUFVTCxXQUFXO2dCQUN6QixJQUFJLENBQUNBLGFBQWFDLFNBQVMsQ0FBQ0QsYUFBYUksVUFBVTtvQkFDakQsTUFBTSxJQUFJRSxNQUFNO2dCQUNsQjtnQkFFQSx3QkFBd0I7Z0JBQ3hCLE1BQU1DLGFBQWE7Z0JBQ25CLElBQUksQ0FBQ0EsV0FBV0MsSUFBSSxDQUFDUixZQUFZQyxLQUFLLEdBQUc7b0JBQ3ZDLE1BQU0sSUFBSUssTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTUcsT0FBTyxNQUFNbEIsMkNBQU1BLENBQUNrQixJQUFJLENBQUNDLFVBQVUsQ0FBQztvQkFDeENDLE9BQU87d0JBQ0xWLE9BQU9ELFlBQVlDLEtBQUssQ0FBQ1csV0FBVztvQkFDdEM7b0JBQ0FDLFFBQVE7d0JBQ05DLElBQUk7d0JBQ0piLE9BQU87d0JBQ1BGLE1BQU07d0JBQ05LLFVBQVU7d0JBQ1ZXLE1BQU07b0JBQ1I7Z0JBQ0Y7Z0JBRUEsSUFBSSxDQUFDTixNQUFNO29CQUNULE1BQU0sSUFBSUgsTUFBTTtnQkFDbEI7Z0JBRUEsSUFBSSxDQUFDRyxLQUFLTCxRQUFRLEVBQUU7b0JBQ2xCLE1BQU0sSUFBSUUsTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTVUsa0JBQWtCLE1BQU0xQix3REFBYyxDQUMxQ1UsWUFBWUksUUFBUSxFQUNwQkssS0FBS0wsUUFBUTtnQkFHZixJQUFJLENBQUNZLGlCQUFpQjtvQkFDcEIsTUFBTSxJQUFJVixNQUFNO2dCQUNsQjtnQkFFQSxPQUFPO29CQUNMUSxJQUFJTCxLQUFLSyxFQUFFO29CQUNYYixPQUFPUSxLQUFLUixLQUFLO29CQUNqQkYsTUFBTVUsS0FBS1YsSUFBSTtvQkFDZmdCLE1BQU1OLEtBQUtNLElBQUk7Z0JBQ2pCO1lBQ0Y7UUFDRjtLQUNEO0lBQ0RHLFNBQVM7UUFDUEMsVUFBVTtJQUNaO0lBQ0FDLE9BQU87UUFDTEMsUUFBUTtJQUNWO0lBQ0FDLFdBQVc7UUFDVCxNQUFNQyxLQUFJLEVBQUVDLEtBQUssRUFBRWYsSUFBSSxFQUFFO1lBQ3ZCLElBQUlBLE1BQU07Z0JBQ1JlLE1BQU1WLEVBQUUsR0FBR0wsS0FBS0ssRUFBRTtnQkFDbEJVLE1BQU1ULElBQUksR0FBR04sS0FBS00sSUFBSTtZQUN4QjtZQUNBLE9BQU9TO1FBQ1Q7UUFDQSxNQUFNTixTQUFRLEVBQUVBLE9BQU8sRUFBRU0sS0FBSyxFQUFFO1lBQzlCLElBQUlBLE9BQU87Z0JBQ1ROLFFBQVFULElBQUksQ0FBQ0ssRUFBRSxHQUFHVSxNQUFNVixFQUFFO2dCQUMxQkksUUFBUVQsSUFBSSxDQUFDTSxJQUFJLEdBQUdTLE1BQU1ULElBQUk7WUFDaEM7WUFDQSxPQUFPRztRQUNUO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSBcIm5leHQtYXV0aFwiXG5pbXBvcnQgeyBQcmlzbWFBZGFwdGVyIH0gZnJvbSBcIkBuZXh0LWF1dGgvcHJpc21hLWFkYXB0ZXJcIlxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIlxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIi4vcHJpc21hXCJcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIocHJpc21hKSxcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQsXG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbWFpbCB5IGNvbnRyYXNlw7FhIHNvbiByZXF1ZXJpZG9zXCIpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBWYWxpZGF0ZSBlbWFpbCBmb3JtYXRcbiAgICAgICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvXG4gICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGNyZWRlbnRpYWxzLmVtYWlsKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm1hdG8gZGUgZW1haWwgaW52w6FsaWRvXCIpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHRydWUsXG4gICAgICAgICAgICByb2xlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGV4aXN0ZSB1bmEgY3VlbnRhIGNvbiBlc3RlIGVtYWlsXCIpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFc3RhIGN1ZW50YSBubyB0aWVuZSBjb250cmFzZcOxYSBjb25maWd1cmFkYVwiKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoXG4gICAgICAgICAgY3JlZGVudGlhbHMucGFzc3dvcmQsXG4gICAgICAgICAgdXNlci5wYXNzd29yZFxuICAgICAgICApXG5cbiAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250cmFzZcOxYSBpbmNvcnJlY3RhXCIpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICBdLFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCJcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46IFwiL2xvZ2luXCJcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkXG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGVcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlblxuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZCBhcyBzdHJpbmdcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB0b2tlbi5yb2xlIGFzIHN0cmluZ1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb25cbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFBZGFwdGVyIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsImJjcnlwdCIsInByaXNtYSIsImF1dGhPcHRpb25zIiwiYWRhcHRlciIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiRXJyb3IiLCJlbWFpbFJlZ2V4IiwidGVzdCIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJ0b0xvd2VyQ2FzZSIsInNlbGVjdCIsImlkIiwicm9sZSIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJwYWdlcyIsInNpZ25JbiIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/email.ts":
/*!**********************!*\
  !*** ./lib/email.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailService: () => (/* binding */ emailService)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/.pnpm/nodemailer@7.0.5/node_modules/nodemailer/lib/nodemailer.js\");\n\nclass EmailService {\n    constructor(){\n        this.transporter = null;\n        this.initializeTransporter();\n    }\n    initializeTransporter() {\n        const config = {\n            host: process.env.EMAIL_SERVER_HOST || \"smtp.gmail.com\",\n            port: parseInt(process.env.EMAIL_SERVER_PORT || \"587\"),\n            user: process.env.EMAIL_SERVER_USER || \"\",\n            password: process.env.EMAIL_SERVER_PASSWORD || \"\",\n            from: process.env.EMAIL_FROM || \"noreply@autorifapro.com\"\n        };\n        if (config.user && config.password) {\n            this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransporter({\n                host: config.host,\n                port: config.port,\n                secure: config.port === 465,\n                auth: {\n                    user: config.user,\n                    pass: config.password\n                }\n            });\n        }\n    }\n    async sendEmail(to, subject, html) {\n        if (!this.transporter) {\n            console.warn(\"Email service not configured. Skipping email send.\");\n            return false;\n        }\n        try {\n            await this.transporter.sendMail({\n                from: process.env.EMAIL_FROM || \"noreply@autorifapro.com\",\n                to,\n                subject,\n                html\n            });\n            return true;\n        } catch (error) {\n            console.error(\"Error sending email:\", error);\n            return false;\n        }\n    }\n    async sendTicketPurchaseConfirmation(data) {\n        const subject = `Confirmación de Compra - ${data.raffleTitle}`;\n        const html = `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <meta charset=\"utf-8\">\r\n        <title>Confirmación de Compra</title>\r\n      </head>\r\n      <body style=\"font-family: Arial, sans-serif; line-height: 1.6; color: #333;\">\r\n        <div style=\"max-width: 600px; margin: 0 auto; padding: 20px;\">\r\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;\">\r\n            <h1 style=\"margin: 0; font-size: 24px;\">¡Compra Confirmada!</h1>\r\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9;\">AutoRifa Pro</p>\r\n          </div>\r\n          \r\n          <div style=\"background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px;\">\r\n            <h2 style=\"color: #2c3e50; margin-top: 0;\">Hola ${data.buyerName},</h2>\r\n            \r\n            <p>Gracias por tu compra. Hemos recibido tu solicitud para los siguientes boletos:</p>\r\n            \r\n            <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #667eea;\">\r\n              <h3 style=\"margin-top: 0; color: #2c3e50;\">${data.raffleTitle}</h3>\r\n              <p><strong>Boletos:</strong> ${data.ticketNumbers.map((num)=>num.toString().padStart(4, \"0\")).join(\", \")}</p>\r\n              <p><strong>Método de pago:</strong> ${this.getPaymentMethodText(data.paymentMethod)}</p>\r\n              <p><strong>Total pagado:</strong> $${data.totalAmount}</p>\r\n            </div>\r\n            \r\n            <div style=\"background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0;\">\r\n              <h4 style=\"margin-top: 0; color: #856404;\">⚠️ Importante</h4>\r\n              <p style=\"margin: 0; color: #856404;\">\r\n                Tus boletos están <strong>pendientes de confirmación</strong>. \r\n                Una vez que confirmemos tu pago, tus boletos estarán activos y podrás participar en el sorteo.\r\n              </p>\r\n            </div>\r\n            \r\n            <p>Recibirás una notificación por email cuando tu pago sea confirmado.</p>\r\n            \r\n            <div style=\"text-align: center; margin-top: 30px;\">\r\n              <a href=\"${process.env.NEXTAUTH_URL}/my-tickets\" style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;\">\r\n                Ver Mis Boletos\r\n              </a>\r\n            </div>\r\n            \r\n            <hr style=\"border: none; border-top: 1px solid #dee2e6; margin: 30px 0;\">\r\n            <p style=\"text-align: center; color: #6c757d; font-size: 14px;\">\r\n              Si tienes alguna pregunta, no dudes en contactarnos.<br>\r\n              <strong>AutoRifa Pro</strong> - La plataforma más segura para rifas de vehículos\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `;\n        return this.sendEmail(data.buyerEmail, subject, html);\n    }\n    async sendPaymentConfirmation(data) {\n        const subject = `Pago Confirmado - ${data.raffleTitle}`;\n        const html = `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <meta charset=\"utf-8\">\r\n        <title>Pago Confirmado</title>\r\n      </head>\r\n      <body style=\"font-family: Arial, sans-serif; line-height: 1.6; color: #333;\">\r\n        <div style=\"max-width: 600px; margin: 0 auto; padding: 20px;\">\r\n          <div style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;\">\r\n            <h1 style=\"margin: 0; font-size: 24px;\">¡Pago Confirmado!</h1>\r\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9;\">AutoRifa Pro</p>\r\n          </div>\r\n          \r\n          <div style=\"background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px;\">\r\n            <h2 style=\"color: #2c3e50; margin-top: 0;\">Hola ${data.buyerName},</h2>\r\n            \r\n            <p>¡Excelente! Hemos confirmado tu pago y tus boletos están ahora <strong>activos</strong>.</p>\r\n            \r\n            <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #28a745;\">\r\n              <h3 style=\"margin-top: 0; color: #2c3e50;\">${data.raffleTitle}</h3>\r\n              <p><strong>Boletos activos:</strong> ${data.ticketNumbers.map((num)=>num.toString().padStart(4, \"0\")).join(\", \")}</p>\r\n              <p><strong>Método de pago:</strong> ${this.getPaymentMethodText(data.paymentMethod)}</p>\r\n              <p><strong>Total pagado:</strong> $${data.totalAmount}</p>\r\n            </div>\r\n            \r\n            <div style=\"background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin: 20px 0;\">\r\n              <h4 style=\"margin-top: 0; color: #155724;\">✅ Confirmado</h4>\r\n              <p style=\"margin: 0; color: #155724;\">\r\n                Tus boletos están <strong>activos</strong> y participarán en el sorteo. \r\n                ¡Buena suerte!\r\n              </p>\r\n            </div>\r\n            \r\n            <div style=\"text-align: center; margin-top: 30px;\">\r\n              <a href=\"${process.env.NEXTAUTH_URL}/my-tickets\" style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;\">\r\n                Ver Mis Boletos\r\n              </a>\r\n            </div>\r\n            \r\n            <hr style=\"border: none; border-top: 1px solid #dee2e6; margin: 30px 0;\">\r\n            <p style=\"text-align: center; color: #6c757d; font-size: 14px;\">\r\n              Si tienes alguna pregunta, no dudes en contactarnos.<br>\r\n              <strong>AutoRifa Pro</strong> - La plataforma más segura para rifas de vehículos\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `;\n        return this.sendEmail(data.buyerEmail, subject, html);\n    }\n    async sendWinnerNotification(data) {\n        const subject = `¡Felicidades! Eres el Ganador - ${data.raffleTitle}`;\n        const html = `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <meta charset=\"utf-8\">\r\n        <title>¡Eres el Ganador!</title>\r\n      </head>\r\n      <body style=\"font-family: Arial, sans-serif; line-height: 1.6; color: #333;\">\r\n        <div style=\"max-width: 600px; margin: 0 auto; padding: 20px;\">\r\n          <div style=\"background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); color: #333; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;\">\r\n            <h1 style=\"margin: 0; font-size: 24px;\">🎉 ¡FELICIDADES!</h1>\r\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9;\">¡Eres el Ganador!</p>\r\n          </div>\r\n          \r\n          <div style=\"background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px;\">\r\n            <h2 style=\"color: #2c3e50; margin-top: 0;\">Hola ${data.winnerName},</h2>\r\n            \r\n            <p>¡Increíbles noticias! Has ganado la rifa:</p>\r\n            \r\n            <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ffd700;\">\r\n              <h3 style=\"margin-top: 0; color: #2c3e50;\">${data.raffleTitle}</h3>\r\n              <p><strong>Boleto ganador:</strong> #${data.ticketNumber.toString().padStart(4, \"0\")}</p>\r\n              <p><strong>Premio:</strong> ${data.prize}</p>\r\n            </div>\r\n            \r\n            <div style=\"background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0;\">\r\n              <h4 style=\"margin-top: 0; color: #856404;\">🎁 Próximos Pasos</h4>\r\n              <p style=\"margin: 0; color: #856404;\">\r\n                Nuestro equipo se pondrá en contacto contigo pronto para coordinar la entrega de tu premio.\r\n              </p>\r\n            </div>\r\n            \r\n            <div style=\"text-align: center; margin-top: 30px;\">\r\n              <a href=\"${process.env.NEXTAUTH_URL}/winners\" style=\"background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); color: #333; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;\">\r\n                Ver Ganadores\r\n              </a>\r\n            </div>\r\n            \r\n            <hr style=\"border: none; border-top: 1px solid #dee2e6; margin: 30px 0;\">\r\n            <p style=\"text-align: center; color: #6c757d; font-size: 14px;\">\r\n              ¡Gracias por participar en AutoRifa Pro!<br>\r\n              <strong>AutoRifa Pro</strong> - La plataforma más segura para rifas de vehículos\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `;\n        return this.sendEmail(data.winnerEmail, subject, html);\n    }\n    async sendAdminNotification(subject, message) {\n        const adminEmails = process.env.ADMIN_EMAILS?.split(\",\") || [\n            \"admin@autorifapro.com\"\n        ];\n        const html = `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <meta charset=\"utf-8\">\r\n        <title>Notificación Administrativa</title>\r\n      </head>\r\n      <body style=\"font-family: Arial, sans-serif; line-height: 1.6; color: #333;\">\r\n        <div style=\"max-width: 600px; margin: 0 auto; padding: 20px;\">\r\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0;\">\r\n            <h1 style=\"margin: 0; font-size: 24px;\">Notificación Administrativa</h1>\r\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9;\">AutoRifa Pro</p>\r\n          </div>\r\n          \r\n          <div style=\"background: #f8f9fa; padding: 30px; border-radius: 0 0 10px 10px;\">\r\n            <h2 style=\"color: #2c3e50; margin-top: 0;\">${subject}</h2>\r\n            <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 20px 0;\">\r\n              ${message}\r\n            </div>\r\n            \r\n            <hr style=\"border: none; border-top: 1px solid #dee2e6; margin: 30px 0;\">\r\n            <p style=\"text-align: center; color: #6c757d; font-size: 14px;\">\r\n              <strong>AutoRifa Pro</strong> - Panel de Administración\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `;\n        const results = await Promise.all(adminEmails.map((email)=>this.sendEmail(email, `[Admin] ${subject}`, html)));\n        return results.every((result)=>result);\n    }\n    getPaymentMethodText(method) {\n        switch(method){\n            case \"zelle\":\n                return \"Zelle\";\n            case \"paypal\":\n                return \"PayPal\";\n            case \"binance\":\n                return \"Binance Pay\";\n            case \"pago-movil\":\n                return \"Pago M\\xf3vil\";\n            default:\n                return method;\n        }\n    }\n}\nconst emailService = new EmailService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxDQUFDckMsU0FBUyxDQUFDcUMsT0FBTyxDQUFDLFFBQVEsRUFBRW5DLFFBQVEsQ0FBQyxFQUFFQztRQUd6RSxPQUFPK0IsUUFBUUksS0FBSyxDQUFDQyxDQUFBQSxTQUFVQTtJQUNuQztJQUVRckIscUJBQXFCc0IsTUFBYyxFQUFVO1FBQ2pELE9BQVFBO1lBQ0osS0FBSztnQkFDRCxPQUFPO1lBQ1gsS0FBSztnQkFDRCxPQUFPO1lBQ1gsS0FBSztnQkFDRCxPQUFPO1lBQ1gsS0FBSztnQkFDRCxPQUFPO1lBQ1g7Z0JBQ0ksT0FBT0E7UUFDZjtJQUNKO0FBQ0o7QUFFTyxNQUFNQyxlQUFlLElBQUkvRCxlQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9lbWFpbC50cz84MjgxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInO1xyXG5cclxuaW50ZXJmYWNlIEVtYWlsQ29uZmlnIHtcclxuICAgIGhvc3Q6IHN0cmluZztcclxuICAgIHBvcnQ6IG51bWJlcjtcclxuICAgIHVzZXI6IHN0cmluZztcclxuICAgIHBhc3N3b3JkOiBzdHJpbmc7XHJcbiAgICBmcm9tOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUaWNrZXRQdXJjaGFzZUVtYWlsRGF0YSB7XHJcbiAgICBidXllck5hbWU6IHN0cmluZztcclxuICAgIGJ1eWVyRW1haWw6IHN0cmluZztcclxuICAgIHJhZmZsZVRpdGxlOiBzdHJpbmc7XHJcbiAgICB0aWNrZXROdW1iZXJzOiBudW1iZXJbXTtcclxuICAgIHRvdGFsQW1vdW50OiBudW1iZXI7XHJcbiAgICBwYXltZW50TWV0aG9kOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBQYXltZW50Q29uZmlybWF0aW9uRW1haWxEYXRhIHtcclxuICAgIGJ1eWVyTmFtZTogc3RyaW5nO1xyXG4gICAgYnV5ZXJFbWFpbDogc3RyaW5nO1xyXG4gICAgcmFmZmxlVGl0bGU6IHN0cmluZztcclxuICAgIHRpY2tldE51bWJlcnM6IG51bWJlcltdO1xyXG4gICAgdG90YWxBbW91bnQ6IG51bWJlcjtcclxuICAgIHBheW1lbnRNZXRob2Q6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFdpbm5lckVtYWlsRGF0YSB7XHJcbiAgICB3aW5uZXJOYW1lOiBzdHJpbmc7XHJcbiAgICB3aW5uZXJFbWFpbDogc3RyaW5nO1xyXG4gICAgcmFmZmxlVGl0bGU6IHN0cmluZztcclxuICAgIHRpY2tldE51bWJlcjogbnVtYmVyO1xyXG4gICAgcHJpemU6IHN0cmluZztcclxufVxyXG5cclxuY2xhc3MgRW1haWxTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgdHJhbnNwb3J0ZXI6IG5vZGVtYWlsZXIuVHJhbnNwb3J0ZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVUcmFuc3BvcnRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZVRyYW5zcG9ydGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZzogRW1haWxDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LkVNQUlMX1NFUlZFUl9IT1NUIHx8ICdzbXRwLmdtYWlsLmNvbScsXHJcbiAgICAgICAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LkVNQUlMX1NFUlZFUl9QT1JUIHx8ICc1ODcnKSxcclxuICAgICAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuRU1BSUxfU0VSVkVSX1VTRVIgfHwgJycsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5FTUFJTF9TRVJWRVJfUEFTU1dPUkQgfHwgJycsXHJcbiAgICAgICAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX0ZST00gfHwgJ25vcmVwbHlAYXV0b3JpZmFwcm8uY29tJyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoY29uZmlnLnVzZXIgJiYgY29uZmlnLnBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydGVyKHtcclxuICAgICAgICAgICAgICAgIGhvc3Q6IGNvbmZpZy5ob3N0LFxyXG4gICAgICAgICAgICAgICAgcG9ydDogY29uZmlnLnBvcnQsXHJcbiAgICAgICAgICAgICAgICBzZWN1cmU6IGNvbmZpZy5wb3J0ID09PSA0NjUsXHJcbiAgICAgICAgICAgICAgICBhdXRoOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcjogY29uZmlnLnVzZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzczogY29uZmlnLnBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgc2VuZEVtYWlsKHRvOiBzdHJpbmcsIHN1YmplY3Q6IHN0cmluZywgaHRtbDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zcG9ydGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRW1haWwgc2VydmljZSBub3QgY29uZmlndXJlZC4gU2tpcHBpbmcgZW1haWwgc2VuZC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy50cmFuc3BvcnRlci5zZW5kTWFpbCh7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9GUk9NIHx8ICdub3JlcGx5QGF1dG9yaWZhcHJvLmNvbScsXHJcbiAgICAgICAgICAgICAgICB0byxcclxuICAgICAgICAgICAgICAgIHN1YmplY3QsXHJcbiAgICAgICAgICAgICAgICBodG1sLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2VuZFRpY2tldFB1cmNoYXNlQ29uZmlybWF0aW9uKGRhdGE6IFRpY2tldFB1cmNoYXNlRW1haWxEYXRhKSB7XHJcbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IGBDb25maXJtYWNpw7NuIGRlIENvbXByYSAtICR7ZGF0YS5yYWZmbGVUaXRsZX1gO1xyXG4gICAgICAgIGNvbnN0IGh0bWwgPSBgXHJcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxyXG4gICAgICA8aHRtbD5cclxuICAgICAgPGhlYWQ+XHJcbiAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XHJcbiAgICAgICAgPHRpdGxlPkNvbmZpcm1hY2nDs24gZGUgQ29tcHJhPC90aXRsZT5cclxuICAgICAgPC9oZWFkPlxyXG4gICAgICA8Ym9keSBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbGluZS1oZWlnaHQ6IDEuNjsgY29sb3I6ICMzMzM7XCI+XHJcbiAgICAgICAgPGRpdiBzdHlsZT1cIm1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4O1wiPlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBib3JkZXItcmFkaXVzOiAxMHB4IDEwcHggMCAwO1wiPlxyXG4gICAgICAgICAgICA8aDEgc3R5bGU9XCJtYXJnaW46IDA7IGZvbnQtc2l6ZTogMjRweDtcIj7CoUNvbXByYSBDb25maXJtYWRhITwvaDE+XHJcbiAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiAxMHB4IDAgMCAwOyBvcGFjaXR5OiAwLjk7XCI+QXV0b1JpZmEgUHJvPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiAwIDAgMTBweCAxMHB4O1wiPlxyXG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzJjM2U1MDsgbWFyZ2luLXRvcDogMDtcIj5Ib2xhICR7ZGF0YS5idXllck5hbWV9LDwvaDI+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8cD5HcmFjaWFzIHBvciB0dSBjb21wcmEuIEhlbW9zIHJlY2liaWRvIHR1IHNvbGljaXR1ZCBwYXJhIGxvcyBzaWd1aWVudGVzIGJvbGV0b3M6PC9wPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICM2NjdlZWE7XCI+XHJcbiAgICAgICAgICAgICAgPGgzIHN0eWxlPVwibWFyZ2luLXRvcDogMDsgY29sb3I6ICMyYzNlNTA7XCI+JHtkYXRhLnJhZmZsZVRpdGxlfTwvaDM+XHJcbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Cb2xldG9zOjwvc3Ryb25nPiAke2RhdGEudGlja2V0TnVtYmVycy5tYXAobnVtID0+IG51bS50b1N0cmluZygpLnBhZFN0YXJ0KDQsICcwJykpLmpvaW4oJywgJyl9PC9wPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+TcOpdG9kbyBkZSBwYWdvOjwvc3Ryb25nPiAke3RoaXMuZ2V0UGF5bWVudE1ldGhvZFRleHQoZGF0YS5wYXltZW50TWV0aG9kKX08L3A+XHJcbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Ub3RhbCBwYWdhZG86PC9zdHJvbmc+ICQke2RhdGEudG90YWxBbW91bnR9PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZmZmM2NkOyBib3JkZXI6IDFweCBzb2xpZCAjZmZlYWE3OyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbjogMjBweCAwO1wiPlxyXG4gICAgICAgICAgICAgIDxoNCBzdHlsZT1cIm1hcmdpbi10b3A6IDA7IGNvbG9yOiAjODU2NDA0O1wiPuKaoO+4jyBJbXBvcnRhbnRlPC9oND5cclxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogMDsgY29sb3I6ICM4NTY0MDQ7XCI+XHJcbiAgICAgICAgICAgICAgICBUdXMgYm9sZXRvcyBlc3TDoW4gPHN0cm9uZz5wZW5kaWVudGVzIGRlIGNvbmZpcm1hY2nDs248L3N0cm9uZz4uIFxyXG4gICAgICAgICAgICAgICAgVW5hIHZleiBxdWUgY29uZmlybWVtb3MgdHUgcGFnbywgdHVzIGJvbGV0b3MgZXN0YXLDoW4gYWN0aXZvcyB5IHBvZHLDoXMgcGFydGljaXBhciBlbiBlbCBzb3J0ZW8uXHJcbiAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxwPlJlY2liaXLDoXMgdW5hIG5vdGlmaWNhY2nDs24gcG9yIGVtYWlsIGN1YW5kbyB0dSBwYWdvIHNlYSBjb25maXJtYWRvLjwvcD5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDMwcHg7XCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMfS9teS10aWNrZXRzXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMzBweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGRpc3BsYXk6IGlubGluZS1ibG9jaztcIj5cclxuICAgICAgICAgICAgICAgIFZlciBNaXMgQm9sZXRvc1xyXG4gICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8aHIgc3R5bGU9XCJib3JkZXI6IG5vbmU7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZGVlMmU2OyBtYXJnaW46IDMwcHggMDtcIj5cclxuICAgICAgICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjNmM3NTdkOyBmb250LXNpemU6IDE0cHg7XCI+XHJcbiAgICAgICAgICAgICAgU2kgdGllbmVzIGFsZ3VuYSBwcmVndW50YSwgbm8gZHVkZXMgZW4gY29udGFjdGFybm9zLjxicj5cclxuICAgICAgICAgICAgICA8c3Ryb25nPkF1dG9SaWZhIFBybzwvc3Ryb25nPiAtIExhIHBsYXRhZm9ybWEgbcOhcyBzZWd1cmEgcGFyYSByaWZhcyBkZSB2ZWjDrWN1bG9zXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2JvZHk+XHJcbiAgICAgIDwvaHRtbD5cclxuICAgIGA7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRFbWFpbChkYXRhLmJ1eWVyRW1haWwsIHN1YmplY3QsIGh0bWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlbmRQYXltZW50Q29uZmlybWF0aW9uKGRhdGE6IFBheW1lbnRDb25maXJtYXRpb25FbWFpbERhdGEpIHtcclxuICAgICAgICBjb25zdCBzdWJqZWN0ID0gYFBhZ28gQ29uZmlybWFkbyAtICR7ZGF0YS5yYWZmbGVUaXRsZX1gO1xyXG4gICAgICAgIGNvbnN0IGh0bWwgPSBgXHJcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxyXG4gICAgICA8aHRtbD5cclxuICAgICAgPGhlYWQ+XHJcbiAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XHJcbiAgICAgICAgPHRpdGxlPlBhZ28gQ29uZmlybWFkbzwvdGl0bGU+XHJcbiAgICAgIDwvaGVhZD5cclxuICAgICAgPGJvZHkgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzO1wiPlxyXG4gICAgICAgIDxkaXYgc3R5bGU9XCJtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZzogMjBweDtcIj5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLXJhZGl1czogMTBweCAxMHB4IDAgMDtcIj5cclxuICAgICAgICAgICAgPGgxIHN0eWxlPVwibWFyZ2luOiAwOyBmb250LXNpemU6IDI0cHg7XCI+wqFQYWdvIENvbmZpcm1hZG8hPC9oMT5cclxuICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDEwcHggMCAwIDA7IG9wYWNpdHk6IDAuOTtcIj5BdXRvUmlmYSBQcm88L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmOGY5ZmE7IHBhZGRpbmc6IDMwcHg7IGJvcmRlci1yYWRpdXM6IDAgMCAxMHB4IDEwcHg7XCI+XHJcbiAgICAgICAgICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjMmMzZTUwOyBtYXJnaW4tdG9wOiAwO1wiPkhvbGEgJHtkYXRhLmJ1eWVyTmFtZX0sPC9oMj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxwPsKhRXhjZWxlbnRlISBIZW1vcyBjb25maXJtYWRvIHR1IHBhZ28geSB0dXMgYm9sZXRvcyBlc3TDoW4gYWhvcmEgPHN0cm9uZz5hY3Rpdm9zPC9zdHJvbmc+LjwvcD5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDIwcHggMDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjhhNzQ1O1wiPlxyXG4gICAgICAgICAgICAgIDxoMyBzdHlsZT1cIm1hcmdpbi10b3A6IDA7IGNvbG9yOiAjMmMzZTUwO1wiPiR7ZGF0YS5yYWZmbGVUaXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Qm9sZXRvcyBhY3Rpdm9zOjwvc3Ryb25nPiAke2RhdGEudGlja2V0TnVtYmVycy5tYXAobnVtID0+IG51bS50b1N0cmluZygpLnBhZFN0YXJ0KDQsICcwJykpLmpvaW4oJywgJyl9PC9wPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+TcOpdG9kbyBkZSBwYWdvOjwvc3Ryb25nPiAke3RoaXMuZ2V0UGF5bWVudE1ldGhvZFRleHQoZGF0YS5wYXltZW50TWV0aG9kKX08L3A+XHJcbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Ub3RhbCBwYWdhZG86PC9zdHJvbmc+ICQke2RhdGEudG90YWxBbW91bnR9PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZDRlZGRhOyBib3JkZXI6IDFweCBzb2xpZCAjYzNlNmNiOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbjogMjBweCAwO1wiPlxyXG4gICAgICAgICAgICAgIDxoNCBzdHlsZT1cIm1hcmdpbi10b3A6IDA7IGNvbG9yOiAjMTU1NzI0O1wiPuKchSBDb25maXJtYWRvPC9oND5cclxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogMDsgY29sb3I6ICMxNTU3MjQ7XCI+XHJcbiAgICAgICAgICAgICAgICBUdXMgYm9sZXRvcyBlc3TDoW4gPHN0cm9uZz5hY3Rpdm9zPC9zdHJvbmc+IHkgcGFydGljaXBhcsOhbiBlbiBlbCBzb3J0ZW8uIFxyXG4gICAgICAgICAgICAgICAgwqFCdWVuYSBzdWVydGUhXHJcbiAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDMwcHg7XCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMfS9teS10aWNrZXRzXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMjhhNzQ1IDAlLCAjMjBjOTk3IDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMzBweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGRpc3BsYXk6IGlubGluZS1ibG9jaztcIj5cclxuICAgICAgICAgICAgICAgIFZlciBNaXMgQm9sZXRvc1xyXG4gICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8aHIgc3R5bGU9XCJib3JkZXI6IG5vbmU7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZGVlMmU2OyBtYXJnaW46IDMwcHggMDtcIj5cclxuICAgICAgICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjNmM3NTdkOyBmb250LXNpemU6IDE0cHg7XCI+XHJcbiAgICAgICAgICAgICAgU2kgdGllbmVzIGFsZ3VuYSBwcmVndW50YSwgbm8gZHVkZXMgZW4gY29udGFjdGFybm9zLjxicj5cclxuICAgICAgICAgICAgICA8c3Ryb25nPkF1dG9SaWZhIFBybzwvc3Ryb25nPiAtIExhIHBsYXRhZm9ybWEgbcOhcyBzZWd1cmEgcGFyYSByaWZhcyBkZSB2ZWjDrWN1bG9zXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2JvZHk+XHJcbiAgICAgIDwvaHRtbD5cclxuICAgIGA7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRFbWFpbChkYXRhLmJ1eWVyRW1haWwsIHN1YmplY3QsIGh0bWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlbmRXaW5uZXJOb3RpZmljYXRpb24oZGF0YTogV2lubmVyRW1haWxEYXRhKSB7XHJcbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IGDCoUZlbGljaWRhZGVzISBFcmVzIGVsIEdhbmFkb3IgLSAke2RhdGEucmFmZmxlVGl0bGV9YDtcclxuICAgICAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cclxuICAgICAgPGh0bWw+XHJcbiAgICAgIDxoZWFkPlxyXG4gICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxyXG4gICAgICAgIDx0aXRsZT7CoUVyZXMgZWwgR2FuYWRvciE8L3RpdGxlPlxyXG4gICAgICA8L2hlYWQ+XHJcbiAgICAgIDxib2R5IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzMzMztcIj5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwibWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7XCI+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZmZDcwMCAwJSwgI2ZmZWQ0ZSAxMDAlKTsgY29sb3I6ICMzMzM7IHBhZGRpbmc6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLXJhZGl1czogMTBweCAxMHB4IDAgMDtcIj5cclxuICAgICAgICAgICAgPGgxIHN0eWxlPVwibWFyZ2luOiAwOyBmb250LXNpemU6IDI0cHg7XCI+8J+OiSDCoUZFTElDSURBREVTITwvaDE+XHJcbiAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiAxMHB4IDAgMCAwOyBvcGFjaXR5OiAwLjk7XCI+wqFFcmVzIGVsIEdhbmFkb3IhPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiAwIDAgMTBweCAxMHB4O1wiPlxyXG4gICAgICAgICAgICA8aDIgc3R5bGU9XCJjb2xvcjogIzJjM2U1MDsgbWFyZ2luLXRvcDogMDtcIj5Ib2xhICR7ZGF0YS53aW5uZXJOYW1lfSw8L2gyPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPHA+wqFJbmNyZcOtYmxlcyBub3RpY2lhcyEgSGFzIGdhbmFkbyBsYSByaWZhOjwvcD5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDIwcHggMDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZmZkNzAwO1wiPlxyXG4gICAgICAgICAgICAgIDxoMyBzdHlsZT1cIm1hcmdpbi10b3A6IDA7IGNvbG9yOiAjMmMzZTUwO1wiPiR7ZGF0YS5yYWZmbGVUaXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+Qm9sZXRvIGdhbmFkb3I6PC9zdHJvbmc+ICMke2RhdGEudGlja2V0TnVtYmVyLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwgJzAnKX08L3A+XHJcbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5QcmVtaW86PC9zdHJvbmc+ICR7ZGF0YS5wcml6ZX08L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlcjogMXB4IHNvbGlkICNmZmVhYTc7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luOiAyMHB4IDA7XCI+XHJcbiAgICAgICAgICAgICAgPGg0IHN0eWxlPVwibWFyZ2luLXRvcDogMDsgY29sb3I6ICM4NTY0MDQ7XCI+8J+OgSBQcsOzeGltb3MgUGFzb3M8L2g0PlxyXG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiAwOyBjb2xvcjogIzg1NjQwNDtcIj5cclxuICAgICAgICAgICAgICAgIE51ZXN0cm8gZXF1aXBvIHNlIHBvbmRyw6EgZW4gY29udGFjdG8gY29udGlnbyBwcm9udG8gcGFyYSBjb29yZGluYXIgbGEgZW50cmVnYSBkZSB0dSBwcmVtaW8uXHJcbiAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDMwcHg7XCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMfS93aW5uZXJzXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmZkNzAwIDAlLCAjZmZlZDRlIDEwMCUpOyBjb2xvcjogIzMzMzsgcGFkZGluZzogMTJweCAzMHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXdlaWdodDogYm9sZDtcIj5cclxuICAgICAgICAgICAgICAgIFZlciBHYW5hZG9yZXNcclxuICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGhyIHN0eWxlPVwiYm9yZGVyOiBub25lOyBib3JkZXItdG9wOiAxcHggc29saWQgI2RlZTJlNjsgbWFyZ2luOiAzMHB4IDA7XCI+XHJcbiAgICAgICAgICAgIDxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzZjNzU3ZDsgZm9udC1zaXplOiAxNHB4O1wiPlxyXG4gICAgICAgICAgICAgIMKhR3JhY2lhcyBwb3IgcGFydGljaXBhciBlbiBBdXRvUmlmYSBQcm8hPGJyPlxyXG4gICAgICAgICAgICAgIDxzdHJvbmc+QXV0b1JpZmEgUHJvPC9zdHJvbmc+IC0gTGEgcGxhdGFmb3JtYSBtw6FzIHNlZ3VyYSBwYXJhIHJpZmFzIGRlIHZlaMOtY3Vsb3NcclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvYm9keT5cclxuICAgICAgPC9odG1sPlxyXG4gICAgYDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZEVtYWlsKGRhdGEud2lubmVyRW1haWwsIHN1YmplY3QsIGh0bWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlbmRBZG1pbk5vdGlmaWNhdGlvbihzdWJqZWN0OiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGFkbWluRW1haWxzID0gcHJvY2Vzcy5lbnYuQURNSU5fRU1BSUxTPy5zcGxpdCgnLCcpIHx8IFsnYWRtaW5AYXV0b3JpZmFwcm8uY29tJ107XHJcblxyXG4gICAgICAgIGNvbnN0IGh0bWwgPSBgXHJcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxyXG4gICAgICA8aHRtbD5cclxuICAgICAgPGhlYWQ+XHJcbiAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XHJcbiAgICAgICAgPHRpdGxlPk5vdGlmaWNhY2nDs24gQWRtaW5pc3RyYXRpdmE8L3RpdGxlPlxyXG4gICAgICA8L2hlYWQ+XHJcbiAgICAgIDxib2R5IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzMzMztcIj5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwibWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7XCI+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDEwcHggMTBweCAwIDA7XCI+XHJcbiAgICAgICAgICAgIDxoMSBzdHlsZT1cIm1hcmdpbjogMDsgZm9udC1zaXplOiAyNHB4O1wiPk5vdGlmaWNhY2nDs24gQWRtaW5pc3RyYXRpdmE8L2gxPlxyXG4gICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogMTBweCAwIDAgMDsgb3BhY2l0eTogMC45O1wiPkF1dG9SaWZhIFBybzwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2Y4ZjlmYTsgcGFkZGluZzogMzBweDsgYm9yZGVyLXJhZGl1czogMCAwIDEwcHggMTBweDtcIj5cclxuICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMyYzNlNTA7IG1hcmdpbi10b3A6IDA7XCI+JHtzdWJqZWN0fTwvaDI+XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDIwcHggMDtcIj5cclxuICAgICAgICAgICAgICAke21lc3NhZ2V9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGhyIHN0eWxlPVwiYm9yZGVyOiBub25lOyBib3JkZXItdG9wOiAxcHggc29saWQgI2RlZTJlNjsgbWFyZ2luOiAzMHB4IDA7XCI+XHJcbiAgICAgICAgICAgIDxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzZjNzU3ZDsgZm9udC1zaXplOiAxNHB4O1wiPlxyXG4gICAgICAgICAgICAgIDxzdHJvbmc+QXV0b1JpZmEgUHJvPC9zdHJvbmc+IC0gUGFuZWwgZGUgQWRtaW5pc3RyYWNpw7NuXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2JvZHk+XHJcbiAgICAgIDwvaHRtbD5cclxuICAgIGA7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgYWRtaW5FbWFpbHMubWFwKGVtYWlsID0+IHRoaXMuc2VuZEVtYWlsKGVtYWlsLCBgW0FkbWluXSAke3N1YmplY3R9YCwgaHRtbCkpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHMuZXZlcnkocmVzdWx0ID0+IHJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRQYXltZW50TWV0aG9kVGV4dChtZXRob2Q6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgc3dpdGNoIChtZXRob2QpIHtcclxuICAgICAgICAgICAgY2FzZSAnemVsbGUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdaZWxsZSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ3BheXBhbCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1BheVBhbCc7XHJcbiAgICAgICAgICAgIGNhc2UgJ2JpbmFuY2UnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdCaW5hbmNlIFBheSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ3BhZ28tbW92aWwnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdQYWdvIE3Ds3ZpbCc7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGVtYWlsU2VydmljZSA9IG5ldyBFbWFpbFNlcnZpY2UoKTtcclxuIl0sIm5hbWVzIjpbIm5vZGVtYWlsZXIiLCJFbWFpbFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsInRyYW5zcG9ydGVyIiwiaW5pdGlhbGl6ZVRyYW5zcG9ydGVyIiwiY29uZmlnIiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJFTUFJTF9TRVJWRVJfSE9TVCIsInBvcnQiLCJwYXJzZUludCIsIkVNQUlMX1NFUlZFUl9QT1JUIiwidXNlciIsIkVNQUlMX1NFUlZFUl9VU0VSIiwicGFzc3dvcmQiLCJFTUFJTF9TRVJWRVJfUEFTU1dPUkQiLCJmcm9tIiwiRU1BSUxfRlJPTSIsImNyZWF0ZVRyYW5zcG9ydGVyIiwic2VjdXJlIiwiYXV0aCIsInBhc3MiLCJzZW5kRW1haWwiLCJ0byIsInN1YmplY3QiLCJodG1sIiwiY29uc29sZSIsIndhcm4iLCJzZW5kTWFpbCIsImVycm9yIiwic2VuZFRpY2tldFB1cmNoYXNlQ29uZmlybWF0aW9uIiwiZGF0YSIsInJhZmZsZVRpdGxlIiwiYnV5ZXJOYW1lIiwidGlja2V0TnVtYmVycyIsIm1hcCIsIm51bSIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJqb2luIiwiZ2V0UGF5bWVudE1ldGhvZFRleHQiLCJwYXltZW50TWV0aG9kIiwidG90YWxBbW91bnQiLCJORVhUQVVUSF9VUkwiLCJidXllckVtYWlsIiwic2VuZFBheW1lbnRDb25maXJtYXRpb24iLCJzZW5kV2lubmVyTm90aWZpY2F0aW9uIiwid2lubmVyTmFtZSIsInRpY2tldE51bWJlciIsInByaXplIiwid2lubmVyRW1haWwiLCJzZW5kQWRtaW5Ob3RpZmljYXRpb24iLCJtZXNzYWdlIiwiYWRtaW5FbWFpbHMiLCJBRE1JTl9FTUFJTFMiLCJzcGxpdCIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwiZW1haWwiLCJldmVyeSIsInJlc3VsdCIsIm1ldGhvZCIsImVtYWlsU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/email.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvcHJpc21hLnRzPzk4MjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/next-auth@4.24.11_@auth+cor_9813468dafc1c7a8c7f551d5504c0142","vendor-chunks/@babel+runtime@7.28.2","vendor-chunks/jose@4.15.9","vendor-chunks/openid-client@5.7.1","vendor-chunks/bcryptjs@3.0.2","vendor-chunks/oauth@0.9.15","vendor-chunks/object-hash@2.2.0","vendor-chunks/preact@10.27.0","vendor-chunks/uuid@8.3.2","vendor-chunks/@next-auth+prisma-adapter@1_3df2e61e3bb8dcfa987abf9506de9bb7","vendor-chunks/yallist@4.0.0","vendor-chunks/preact-render-to-string@5.2.6_preact@10.27.0","vendor-chunks/lru-cache@6.0.0","vendor-chunks/cookie@0.7.2","vendor-chunks/@panva+hkdf@1.2.1","vendor-chunks/oidc-token-hash@5.1.1","vendor-chunks/nodemailer@7.0.5"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@14.2.16_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fraffles%2Fpurchase%2Froute&page=%2Fapi%2Fraffles%2Fpurchase%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fraffles%2Fpurchase%2Froute.ts&appDir=C%3A%5CUsers%5CBIENV%5CDownloads%5Cauth-system%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBIENV%5CDownloads%5Cauth-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();