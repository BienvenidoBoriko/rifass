(()=>{var e={};e.id=5477,e.ids=[5477],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},52911:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c}),a(91683),a(4883),a(76085),a(18766);var t=a(1493),r=a(90796),l=a(63777),n=a.n(l),i=a(24347),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(s,o);let c=["",{children:["(front)",{children:["raffles",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,91683)),"C:\\Users\\BIENV\\Downloads\\auth-system\\app\\(front)\\raffles\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4883)),"C:\\Users\\BIENV\\Downloads\\auth-system\\app\\(front)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,76085,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,18766)),"C:\\Users\\BIENV\\Downloads\\auth-system\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,76085,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\BIENV\\Downloads\\auth-system\\app\\(front)\\raffles\\[id]\\page.tsx"],m="/(front)/raffles/[id]/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(front)/raffles/[id]/page",pathname:"/raffles/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},37422:(e,s,a)=>{Promise.resolve().then(a.bind(a,40970))},40970:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>M});var t=a(15414),r=a(29313),l=a(6867),n=a(72884),i=a(40664),o=a(42770),c=a(46214),d=a(49311),m=a(232),u=a(18321),x=a(62323),p=a(87417),h=a(22678),f=a(57891),g=a(35762),v=a(32121),j=a(93781),b=a(70003),N=a(77287);function y({availableTickets:e,loading:s=!1,selectedTickets:a,onSelectionChange:r,pricePerTicket:n,maxTickets:i=10}){let[o,c]=(0,l.useState)(""),d=s=>{!(a.length>=i)&&!a.includes(s)&&e.includes(s)&&r([...a,s])},u=e=>{r(a.filter(s=>s!==e))},x=s=>{let t=e.filter(e=>!a.includes(e)),l=Math.min(s,i-a.length,t.length);r([...a,...t.sort(()=>.5-Math.random()).slice(0,l)])},p=e=>e.toString().padStart(4,"0");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(v._,{className:"text-base font-semibold text-slate-900",children:["Seleccionar Boletos (",a.length,"/",i,")"]}),t.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Elige tus n\xfameros de la suerte o d\xe9janos seleccionar por ti"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(m.z,{type:"button",variant:"outline",size:"sm",onClick:()=>x(1),disabled:a.length>=i,children:[t.jsx(b.Z,{className:"h-4 w-4 mr-1"}),"1 Aleatorio"]}),(0,t.jsxs)(m.z,{type:"button",variant:"outline",size:"sm",onClick:()=>x(5),disabled:a.length>=i-4,children:[t.jsx(b.Z,{className:"h-4 w-4 mr-1"}),"5 Aleatorios"]}),t.jsx(m.z,{type:"button",variant:"outline",size:"sm",onClick:()=>r([]),disabled:0===a.length,children:"Limpiar Todo"})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=parseInt(o);!isNaN(s)&&s>=0&&s<=9999&&(d(s),c(""))},className:"flex gap-2",children:[t.jsx("div",{className:"flex-1",children:t.jsx(g.I,{type:"number",min:"0",max:"9999",placeholder:"Buscar n\xfamero espec\xedfico (0000-9999)",value:o,onChange:e=>c(e.target.value)})}),t.jsx(m.z,{type:"submit",disabled:a.length>=i,children:"Agregar"})]}),a.length>0&&(0,t.jsxs)("div",{children:[t.jsx(v._,{className:"text-sm font-medium text-slate-700",children:"Boletos Seleccionados:"}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map(e=>(0,t.jsxs)(j.C,{variant:"secondary",className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border-blue-200",children:[p(e),t.jsx("button",{type:"button",onClick:()=>u(e),className:"ml-2 hover:text-red-600",children:t.jsx(N.Z,{className:"h-3 w-3"})})]},e))})]}),a.length>0&&n&&(0,t.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[t.jsx("h4",{className:"font-semibold text-slate-900",children:"Resumen de Compra"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Boletos seleccionados:"}),t.jsx("span",{className:"font-medium",children:a.length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Precio por boleto:"}),(0,t.jsxs)("span",{children:["$",n]})]}),t.jsx("div",{className:"border-t pt-2",children:(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[t.jsx("span",{children:"Total:"}),(0,t.jsxs)("span",{className:"text-blue-600",children:["$",(a.length*n).toFixed(2)]})]})})]})]}),(0,t.jsxs)("div",{className:"text-sm text-slate-600",children:[(0,t.jsxs)("p",{children:["Boletos disponibles: ",e.length.toLocaleString()]}),(0,t.jsxs)("p",{children:["Boletos vendidos: ",(1e4-e.length).toLocaleString()]})]})]})}var w=a(35631),k=a(96605);let P=(0,k.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),E=(0,k.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var _=a(34746),C=a(205),S=a(34764),A=a(46776);function I({paymentMethod:e,totalAmount:s,onComplete:a}){let[r,n]=(0,l.useState)(""),[i,o]=(0,l.useState)(null),[c,x]=(0,l.useState)(""),[p,f]=(0,l.useState)(!1),g=e=>{navigator.clipboard.writeText(e),h.A.success("Informaci\xf3n copiada al portapapeles")},v=async()=>{if(!r.trim()){h.A.error("Por favor ingresa la referencia de pago");return}if(!i){h.A.error("Por favor sube una imagen del comprobante de pago");return}f(!0);try{let e=new FormData;e.append("file",i);let s=await fetch("/api/upload",{method:"POST",body:e});if(!s.ok){let e=await s.json();throw Error(e.error||"Error al subir el archivo")}let t=await s.json();a(r,t.url,c)}catch(e){console.error("Error uploading file:",e),h.A.error(e instanceof Error?e.message:"Error al subir el archivo")}finally{f(!1)}},j=(()=>{switch(e){case"zelle":return{title:"Pago con Zelle",email:process.env.NEXT_PUBLIC_ZELLE_EMAIL||"pagos@autorifapro.com",instructions:["Abre tu app bancaria o Zelle",`Env\xeda el pago al email: ${process.env.NEXT_PUBLIC_ZELLE_EMAIL||"pagos@autorifapro.com"}`,'Usa como concepto: "Boletos AutoRifa"',"Guarda la referencia de la transacci\xf3n","Sube una imagen del comprobante de pago","Ingresa la referencia abajo para confirmar"]};case"paypal":return{title:"Pago con PayPal",email:process.env.NEXT_PUBLIC_PAYPAL_EMAIL||"pagos@autorifapro.com",instructions:["Abre PayPal en tu navegador o app",`Env\xeda el pago al email: ${process.env.NEXT_PUBLIC_PAYPAL_EMAIL||"pagos@autorifapro.com"}`,'Usa como concepto: "Boletos AutoRifa"',"Guarda la referencia de la transacci\xf3n","Sube una imagen del comprobante de pago","Ingresa la referencia abajo para confirmar"]};case"binance":return{title:"Pago con Binance Pay",wallet:process.env.NEXT_PUBLIC_BINANCE_EMAIL||"autorifapro@binance.com",instructions:["Abre Binance Pay en tu app",`Env\xeda USDT a: ${process.env.NEXT_PUBLIC_BINANCE_EMAIL||"autorifapro@binance.com"}`,"Usa la red BSC (BEP20) para menores comisiones","Guarda el hash de la transacci\xf3n","Sube una imagen del comprobante de pago","Ingresa el hash abajo para confirmar"]};case"pago-movil":return{title:"Pago M\xf3vil",bank:process.env.NEXT_PUBLIC_PAGO_MOVIL_BANK||"Banco de Venezuela",phone:process.env.NEXT_PUBLIC_PAGO_MOVIL_PHONE||"0412-1234567",ci:process.env.NEXT_PUBLIC_PAGO_MOVIL_CI||"V-12345678",instructions:["Marca *121# desde tu tel\xe9fono","Selecciona Pago M\xf3vil",`Banco: ${process.env.NEXT_PUBLIC_PAGO_MOVIL_BANK||"Banco de Venezuela"}`,`Tel\xe9fono: ${process.env.NEXT_PUBLIC_PAGO_MOVIL_PHONE||"0412-1234567"}`,`C\xe9dula: ${process.env.NEXT_PUBLIC_PAGO_MOVIL_CI||"V-12345678"}`,"Guarda la referencia de la transacci\xf3n","Sube una imagen del comprobante de pago"]};default:return{title:"Procesando pago...",instructions:["Redirigiendo a la pasarela de pago segura..."]}}})();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(u.Zb,{className:"border-blue-200 bg-blue-50",children:[t.jsx(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center space-x-2 text-blue-800",children:[(()=>{switch(e){case"zelle":return t.jsx(d.Z,{className:"h-6 w-6"});case"paypal":case"binance":default:return t.jsx(w.Z,{className:"h-6 w-6"});case"pago-movil":return t.jsx(P,{className:"h-6 w-6"})}})(),t.jsx("span",{children:"Resumen de Pago"})]})}),(0,t.jsxs)(u.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Monto a pagar:"}),(0,t.jsxs)("span",{className:"font-semibold",children:["$",s]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[t.jsx("span",{children:"Total a pagar:"}),(0,t.jsxs)("span",{className:"text-blue-600",children:["$",s]})]})]})]}),(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:t.jsx(u.ll,{children:j.title})}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:["zelle"===e&&t.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:"Email:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"font-mono",children:j.email}),t.jsx(m.z,{variant:"outline",size:"sm",onClick:()=>g(j.email),children:t.jsx(E,{className:"h-4 w-4"})})]})]})}),"paypal"===e&&t.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:"Email:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"font-mono",children:j.email}),t.jsx(m.z,{variant:"outline",size:"sm",onClick:()=>g(j.email),children:t.jsx(E,{className:"h-4 w-4"})})]})]})}),"binance"===e&&t.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:"Wallet:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"font-mono",children:j.wallet}),t.jsx(m.z,{variant:"outline",size:"sm",onClick:()=>g(j.wallet),children:t.jsx(E,{className:"h-4 w-4"})})]})]})}),"pago-movil"===e&&(0,t.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium",children:"Banco:"}),t.jsx("span",{children:j.bank})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium",children:"Tel\xe9fono:"}),t.jsx("span",{className:"font-mono",children:j.phone})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium",children:"C\xe9dula:"}),t.jsx("span",{className:"font-mono",children:j.ci})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"font-medium mb-3",children:"Instrucciones:"}),t.jsx("ol",{className:"space-y-2",children:j.instructions.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start space-x-2",children:[t.jsx("span",{className:"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium flex-shrink-0",children:s+1}),t.jsx("span",{className:"text-slate-700",children:e})]},s))})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Comprobante de Pago *"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("input",{id:"payment-proof",type:"file",accept:"image/*",onChange:e=>{let s=e.target.files?.[0];if(s){let e=(0,A.D0)(s);if(!e.valid){h.A.error(e.error||"Error al validar el archivo");return}o(s),h.A.success("Imagen de comprobante cargada exitosamente")}},className:"hidden"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(m.z,{type:"button",variant:"outline",onClick:()=>document.getElementById("payment-proof")?.click(),className:"flex items-center space-x-2",children:[t.jsx(_.Z,{className:"h-4 w-4"}),t.jsx("span",{children:"Subir Comprobante"})]}),i&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-green-600",children:["✓ ",i.name]}),t.jsx(m.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>{o(null);let e=document.getElementById("payment-proof");e&&(e.value="")},className:"text-red-600 hover:text-red-700",children:t.jsx(N.Z,{className:"h-4 w-4"})})]})]}),t.jsx("p",{className:"text-sm text-slate-500",children:"Sube una imagen del comprobante de pago (JPG, PNG, WEBP - m\xe1ximo 5MB)"})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Comentario (opcional)"}),t.jsx(S.g,{value:c,onChange:e=>x(e.target.value),placeholder:"Agrega alg\xfan comentario o informaci\xf3n adicional sobre tu pago...",rows:3,className:"resize-none"})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Referencia de Pago *"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Ingresa la referencia o hash de la transacci\xf3n",className:"flex-1 px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,t.jsxs)(m.z,{onClick:v,disabled:!r.trim()||!i||p,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400",children:[t.jsx(C.Z,{className:"h-4 w-4 mr-1"}),p?"Subiendo...":"Confirmar"]})]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Una vez enviado el pago, ingresa la referencia y sube el comprobante para que podamos verificar y confirmar tus boletos."})]})]})]}),t.jsx(u.Zb,{className:"border-yellow-200 bg-yellow-50",children:(0,t.jsxs)(u.aY,{className:"p-4",children:[t.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Notas Importantes:"}),(0,t.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,t.jsxs)("li",{children:["• El pago debe realizarse por el monto exacto: $",s]}),t.jsx("li",{children:"• Tus boletos ser\xe1n reservados por 30 minutos"}),t.jsx("li",{children:"• La confirmaci\xf3n puede tomar hasta 24 horas"}),t.jsx("li",{children:"• Guarda la referencia de pago para futuras consultas"}),t.jsx("li",{children:"• Es obligatorio subir una imagen del comprobante de pago"})]})]})})]})}var B=a(75047),z=a(22517),Z=a(56830);let T=()=>{let{data:e}=(0,Z.useSession)(),[s,a]=(0,l.useState)(!1),[t,r]=(0,l.useState)(null);return{purchaseTickets:async s=>{if(!e?.user)return r("Please sign in to purchase tickets"),null;a(!0),r(null);try{let e=await fetch("/api/raffles/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to purchase tickets")}return await e.json()}catch(e){return r(e instanceof Error?e.message:"An error occurred"),null}finally{a(!1)}},loading:s,error:t}};function M(){let e=(0,r.useParams)(),{data:s}=(0,Z.useSession)(),[a,g]=(0,l.useState)([]),[v,j]=(0,l.useState)(!1),[b,N]=(0,l.useState)(!1),[w,k]=(0,l.useState)(""),[P,E]=(0,l.useState)(null),_=e?.id;if(!_)return t.jsx("div",{children:"Raffle not found"});let C=parseInt(_),{raffle:S,loading:A}=(0,z.yk)(C),{tickets:M,loading:L}=(0,z.p3)(C),{purchaseTickets:O,loading:U}=T(),D=async()=>{if(!s?.user){N(!0);return}if(0===a.length){h.A.error("Debes seleccionar al menos un boleto para continuar.");return}if(!w){h.A.error("Debes seleccionar un m\xe9todo de pago.");return}let e=a.length*(S?.pricePerTicket||0);E({ticketNumbers:[...a],totalAmount:e,paymentMethod:w}),j(!0),h.A.success("Completa el pago para confirmar tus boletos. Tienes 30 minutos para completar la transacci\xf3n.")},$=async(e,a,t)=>{if(!s?.user){h.A.error("Debes iniciar sesi\xf3n para completar el pago");return}if(!P){h.A.error("No hay compra pendiente");return}try{console.log("Enviando datos:",{raffleId:C,ticketNumbers:P.ticketNumbers,paymentMethod:P.paymentMethod,paymentReference:e,paymentProof:a,paymentComment:t});let s=await fetch("/api/raffles/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({raffleId:C,ticketNumbers:P.ticketNumbers,paymentMethod:P.paymentMethod,paymentReference:e,paymentProof:a,paymentComment:t})});if(!s.ok){let e=await s.json();throw Error(e.error||"Error al procesar el pago")}let r=await s.json();console.log("Respuesta del servidor:",r),h.A.success("Tu pago ha sido enviado. Recibir\xe1s una confirmaci\xf3n por email."),j(!1),g([]),E(null),k("")}catch(e){console.error("Error completing payment:",e),h.A.error(e instanceof Error?e.message:"Error al procesar el pago")}};if(A)return t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-8",children:[t.jsx("div",{className:"bg-slate-200 h-8 rounded w-1/2"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsx("div",{className:"bg-slate-200 h-96 rounded"}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-slate-200 h-4 rounded w-3/4"}),t.jsx("div",{className:"bg-slate-200 h-4 rounded w-1/2"})]})]})]})});if(!S)return t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Rifa no encontrada"}),t.jsx("p",{className:"text-slate-600",children:"La rifa que buscas no existe o ha sido eliminada."})]})});let V=S.soldTickets/S.totalTickets*100,G=Math.ceil((new Date(S.endDate).getTime()-new Date().getTime())/864e5);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:S.title}),t.jsx("p",{className:"text-xl text-slate-600",children:S.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx("img",{src:S.imageUrl||"/placeholder-car.jpg",alt:S.title,className:"w-full h-96 object-cover rounded-lg"}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1 rounded-full text-sm font-semibold",children:["$",S.pricePerTicket,"/boleto"]})]}),S.galleryImages&&S.galleryImages.length>0&&t.jsx("div",{className:"grid grid-cols-3 gap-2",children:S.galleryImages.slice(0,3).map((e,s)=>t.jsx("img",{src:e,alt:`${S.title} ${s+1}`,className:"w-full h-24 object-cover rounded"},s))})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center space-x-2",children:[t.jsx(n.Z,{className:"h-5 w-5 text-green-500"}),t.jsx("span",{children:"Informaci\xf3n de la Rifa"})]})}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(i.Z,{className:"h-4 w-4 text-slate-500"}),t.jsx("span",{className:"text-sm text-slate-600",children:G>0?`${G} d\xedas restantes`:"\xdaltimo d\xeda"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(o.Z,{className:"h-4 w-4 text-slate-500"}),(0,t.jsxs)("span",{className:"text-sm text-slate-600",children:[S.soldTickets,"/",S.totalTickets," vendidos"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-slate-600 mb-1",children:[t.jsx("span",{children:"Progreso de venta"}),(0,t.jsxs)("span",{children:[V.toFixed(1),"%"]})]}),t.jsx(p.E,{value:V,className:"h-2"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[t.jsx(c.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Sorteo: ",new Date(S.drawDate).toLocaleDateString()]})]})]})]}),(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center space-x-2",children:[t.jsx(c.Z,{className:"h-5 w-5 text-red-500"}),t.jsx("span",{children:"Tiempo Restante"})]})}),t.jsx(u.aY,{children:t.jsx(f.Z,{endDate:new Date(S.endDate)})})]}),v?P&&t.jsx(I,{onComplete:$,totalAmount:P.totalAmount,paymentMethod:P.paymentMethod}):(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center space-x-2",children:[t.jsx(d.Z,{className:"h-5 w-5 text-green-500"}),t.jsx("span",{children:"Comprar Boletos"})]})}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"M\xe9todo de Pago"}),(0,t.jsxs)(x.Ph,{value:w,onValueChange:k,children:[t.jsx(x.i4,{children:t.jsx(x.ki,{placeholder:"Selecciona m\xe9todo de pago"})}),(0,t.jsxs)(x.Bw,{children:[t.jsx(x.Ql,{value:"zelle",children:"Zelle"}),t.jsx(x.Ql,{value:"paypal",children:"PayPal"}),t.jsx(x.Ql,{value:"binance",children:"Binance Pay"}),t.jsx(x.Ql,{value:"pago-movil",children:"Pago M\xf3vil"})]})]})]}),t.jsx(y,{availableTickets:M,loading:L,selectedTickets:a,onSelectionChange:g,pricePerTicket:S.pricePerTicket}),t.jsx(m.z,{onClick:D,disabled:U||0===a.length,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:U?"Procesando...":"Continuar con el Pago"})]})]})]})]})]}),t.jsx(B.Z,{isOpen:b,onClose:()=>N(!1)})]})}},57891:(e,s,a)=>{"use strict";a.d(s,{Z:()=>l});var t=a(15414),r=a(6867);function l({endDate:e,className:s=""}){let[a,l]=(0,r.useState)({days:0,hours:0,minutes:0,seconds:0});return(0,t.jsxs)("div",{className:`flex space-x-4 ${s}`,children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-3 min-w-[60px]",children:t.jsx("div",{className:"text-2xl font-bold",children:a.days})}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"D\xedas"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-3 min-w-[60px]",children:t.jsx("div",{className:"text-2xl font-bold",children:a.hours})}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Horas"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-3 min-w-[60px]",children:t.jsx("div",{className:"text-2xl font-bold",children:a.minutes})}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Min"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-3 min-w-[60px]",children:t.jsx("div",{className:"text-2xl font-bold",children:a.seconds})}),t.jsx("div",{className:"text-sm text-slate-600 mt-1",children:"Seg"})]})]})}},93781:(e,s,a)=>{"use strict";a.d(s,{C:()=>o});var t=a(15414);a(6867);var r=a(3282),l=a(16358),n=a(46776);let i=(0,l.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:s,asChild:a=!1,...l}){let o=a?r.g7:"span";return t.jsx(o,{"data-slot":"badge",className:(0,n.cn)(i({variant:s}),e),...l})}},87417:(e,s,a)=>{"use strict";a.d(s,{E:()=>N});var t=a(15414),r=a(6867),l=a(88566),n=a(19218),i="Progress",[o,c]=(0,l.b)(i),[d,m]=o(i),u=r.forwardRef((e,s)=>{var a,r;let{__scopeProgress:l,value:i=null,max:o,getValueLabel:c=h,...m}=e;(o||0===o)&&!v(o)&&console.error((a=`${o}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=v(o)?o:100;null===i||j(i,u)||console.error((r=`${i}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let x=j(i,u)?i:null,p=g(x)?c(x,u):void 0;return(0,t.jsx)(d,{scope:l,value:x,max:u,children:(0,t.jsx)(n.WV.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":g(x)?x:void 0,"aria-valuetext":p,role:"progressbar","data-state":f(x,u),"data-value":x??void 0,"data-max":u,...m,ref:s})})});u.displayName=i;var x="ProgressIndicator",p=r.forwardRef((e,s)=>{let{__scopeProgress:a,...r}=e,l=m(x,a);return(0,t.jsx)(n.WV.div,{"data-state":f(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...r,ref:s})});function h(e,s){return`${Math.round(e/s*100)}%`}function f(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function g(e){return"number"==typeof e}function v(e){return g(e)&&!isNaN(e)&&e>0}function j(e,s){return g(e)&&!isNaN(e)&&e<=s&&e>=0}p.displayName=x;var b=a(46776);function N({className:e,value:s,...a}){return t.jsx(u,{"data-slot":"progress",className:(0,b.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...a,children:t.jsx(p,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}},62323:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>u,Ph:()=>c,Ql:()=>x,i4:()=>m,ki:()=>d});var t=a(15414);a(6867);var r=a(36633),l=a(39603),n=a(4721),i=a(54350),o=a(46776);function c({...e}){return t.jsx(r.fC,{"data-slot":"select",...e})}function d({...e}){return t.jsx(r.B4,{"data-slot":"select-value",...e})}function m({className:e,size:s="default",children:a,...n}){return(0,t.jsxs)(r.xz,{"data-slot":"select-trigger","data-size":s,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[a,t.jsx(r.JO,{asChild:!0,children:t.jsx(l.Z,{className:"size-4 opacity-50"})})]})}function u({className:e,children:s,position:a="popper",...l}){return t.jsx(r.h_,{children:(0,t.jsxs)(r.VY,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...l,children:[t.jsx(p,{}),t.jsx(r.l_,{className:(0,o.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),t.jsx(h,{})]})})}function x({className:e,children:s,...a}){return(0,t.jsxs)(r.ck,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...a,children:[t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(r.wU,{children:t.jsx(n.Z,{className:"size-4"})})}),t.jsx(r.eT,{children:s})]})}function p({className:e,...s}){return t.jsx(r.u_,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(i.Z,{className:"size-4"})})}function h({className:e,...s}){return t.jsx(r.$G,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(l.Z,{className:"size-4"})})}},34764:(e,s,a)=>{"use strict";a.d(s,{g:()=>l});var t=a(15414);a(6867);var r=a(46776);function l({className:e,...s}){return t.jsx("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}},22517:(e,s,a)=>{"use strict";a.d(s,{BM:()=>r,Uv:()=>l,p3:()=>i,yk:()=>n});var t=a(6867);let r=()=>{let[e,s]=(0,t.useState)([]),[a,r]=(0,t.useState)(!0),[l,n]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async function(){try{let e=await fetch("/api/raffles/active");if(!e.ok)throw Error("Failed to fetch raffles");let a=await e.json();s(a.raffles)}catch(e){n(e instanceof Error?e.message:"An error occurred")}finally{r(!1)}})()},[]),{raffles:e,loading:a,error:l,refetch:()=>window.location.reload()}},l=()=>{let[e,s]=(0,t.useState)([]),[a,r]=(0,t.useState)(!0),[l,n]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async function(){try{let e=await fetch("/api/winners");if(!e.ok)throw Error("Failed to fetch winners");let a=await e.json();s(a.winners)}catch(e){n(e instanceof Error?e.message:"An error occurred")}finally{r(!1)}})()},[]),{winners:e,loading:a,error:l,refetch:()=>window.location.reload()}},n=e=>{let[s,a]=(0,t.useState)(null),[r,l]=(0,t.useState)(!0),[n,i]=(0,t.useState)(null);return(0,t.useEffect)(()=>{async function s(){try{let s=await fetch(`/api/raffles/${e}`);if(!s.ok){if(404===s.status)throw Error("Raffle not found");throw Error("Failed to fetch raffle")}let t=await s.json();a(t)}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{l(!1)}}e&&s()},[e]),{raffle:s,loading:r,error:n}},i=e=>{let[s,a]=(0,t.useState)([]),[r,l]=(0,t.useState)(!0),[n,i]=(0,t.useState)(null);return(0,t.useEffect)(()=>{async function s(){try{let s=await fetch(`/api/raffles/${e}/available-tickets`);if(!s.ok)throw Error("Failed to fetch available tickets");let t=await s.json();a(t.availableTickets)}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{l(!1)}}e&&s()},[e]),{tickets:s,loading:r,error:n,refetch:()=>window.location.reload()}}},40664:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(96605).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},205:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(96605).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},46214:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(96605).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},49311:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(96605).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},70003:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(96605).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},34746:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(96605).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},91683:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(25805).createProxy)(String.raw`C:\Users\BIENV\Downloads\auth-system\app\(front)\raffles\[id]\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[9780,5688,8388,1430,4322,9235,5715,1063],()=>a(52911));module.exports=t})();