(()=>{var e={};e.id=6264,e.ids=[6264],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},31132:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(26434),s(4883),s(76085),s(18766);var a=s(1493),t=s(90796),o=s(63777),l=s.n(o),i=s(24347),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(r,n);let c=["",{children:["(front)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,26434)),"C:\\Users\\BIENV\\Downloads\\auth-system\\app\\(front)\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4883)),"C:\\Users\\BIENV\\Downloads\\auth-system\\app\\(front)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,76085,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,18766)),"C:\\Users\\BIENV\\Downloads\\auth-system\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,76085,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\BIENV\\Downloads\\auth-system\\app\\(front)\\login\\page.tsx"],m="/(front)/login/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(front)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},37122:(e,r,s)=>{Promise.resolve().then(s.bind(s,79241))},79241:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>v});var a=s(15414),t=s(6867),o=s(9983),l=s(83434),i=s(49892),n=s(3630),c=s(96376),d=s(232),m=s(35762),u=s(32121),p=s(18321),h=s(70183),x=s(22678),f=s(56830),g=s(29313);function v(){let[e,r]=(0,t.useState)(!1),s=(0,g.useRouter)(),[v,j]=(0,t.useState)({email:"",password:""}),[y,w]=(0,t.useState)({name:"",email:"",password:"",confirmPassword:"",phone:"",country:"",city:""}),b=async e=>{if(e.preventDefault(),!v.email||!v.password){x.A.error("Campos requeridos: Por favor, completa todos los campos.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.email)){x.A.error("Email inv\xe1lido: Por favor, ingresa un email v\xe1lido.");return}r(!0);try{let e=await (0,f.signIn)("credentials",{email:v.email,password:v.password,redirect:!1});if(e?.error){console.log(e.error),x.A.error("Error de inicio de sesi\xf3n: "+e.error);return}if(e?.ok){await (0,f.getSession)(),x.A.success("\xa1Bienvenido!: Has iniciado sesi\xf3n exitosamente.");let e=await (0,f.getSession)();e?.user?.role==="admin"?s.push("/admin"):s.push("/"),s.refresh()}}catch(e){console.error("Login error:",e),x.A.error("Error de conexi\xf3n: No se pudo conectar con el servidor. Verifica tu conexi\xf3n a internet.")}finally{r(!1)}},N=async e=>{if(e.preventDefault(),!y.name||!y.email||!y.password||!y.confirmPassword){x.A.error("Campos requeridos: Por favor, completa todos los campos obligatorios.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)){x.A.error("Email inv\xe1lido: Por favor, ingresa un email v\xe1lido.");return}if(y.password.length<6){x.A.error("Contrase\xf1a muy corta: La contrase\xf1a debe tener al menos 6 caracteres.");return}if(y.name.trim().length<2){(0,x.A)("Nombre muy corto: El nombre debe tener al menos 2 caracteres.");return}if(y.password!==y.confirmPassword){x.A.error("Contrase\xf1as no coinciden: Las contrase\xf1as no coinciden. Por favor, verifica.");return}r(!0);try{let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y.name,email:y.email,password:y.password,phone:y.phone,country:y.country,city:y.city})}),r=await e.json();if(!e.ok){if(r.details){let e=Object.values(r.details).filter(Boolean).join(", ");x.A.error("Error de validaci\xf3n: "+e)}else x.A.error("Error de registro: "+r.error);return}x.A.success("\xa1Cuenta creada exitosamente!: Ya puedes iniciar sesi\xf3n con tu nueva cuenta."),w({name:"",email:"",password:"",confirmPassword:"",phone:"",country:"",city:""}),j({email:y.email,password:""})}catch(e){x.A.error("Error de conexi\xf3n: No se pudo conectar con el servidor. Verifica tu conexi\xf3n a internet.")}finally{r(!1)}},C=e=>{j({email:e,password:"123456"})};return a.jsx("div",{className:" flex items-center justify-center z-50 p-4 my-10",children:(0,a.jsxs)(p.Zb,{className:"w-full max-w-md",children:[a.jsx(p.Ol,{className:"relative",children:a.jsx(p.ll,{className:"text-center",children:"Acceder a AutoRifa Pro"})}),a.jsx(p.aY,{children:(0,a.jsxs)(h.mQ,{defaultValue:"login",className:"space-y-4",children:[(0,a.jsxs)(h.dr,{className:"grid w-full grid-cols-2",children:[a.jsx(h.SP,{value:"login",children:"Iniciar Sesi\xf3n"}),a.jsx(h.SP,{value:"register",children:"Registrarse"})]}),(0,a.jsxs)(h.nU,{value:"login",children:[(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"login-email",children:"Correo Electr\xf3nico"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(m.I,{id:"login-email",type:"email",value:v.email,onChange:e=>j({...v,email:e.target.value}),placeholder:"tu@email.com",className:"pl-10",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"login-password",children:"Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(m.I,{id:"login-password",type:"password",value:v.password,onChange:e=>j({...v,password:e.target.value}),placeholder:"Tu contrase\xf1a",className:"pl-10",required:!0})]})]}),a.jsx(d.z,{type:"submit",disabled:e,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:e?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:"Cuentas de Prueba:"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d.z,{type:"button",variant:"outline",size:"sm",onClick:()=>C("test@example.com"),className:"w-full text-left justify-start text-xs",children:"test@example.com (4 boletos)"}),a.jsx(d.z,{type:"button",variant:"outline",size:"sm",onClick:()=>C("demo@test.com"),className:"w-full text-left justify-start text-xs",children:"demo@test.com (3 boletos)"}),a.jsx(d.z,{type:"button",variant:"outline",size:"sm",onClick:()=>C("user@example.com"),className:"w-full text-left justify-start text-xs",children:"user@example.com (5 boletos)"})]}),(0,a.jsxs)("p",{className:"text-xs text-blue-700 mt-2",children:["Contrase\xf1a para todas: ",a.jsx("code",{children:"123456"})]})]})]}),a.jsx(h.nU,{value:"register",children:(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"register-name",children:"Nombre Completo"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(m.I,{id:"register-name",value:y.name,onChange:e=>w({...y,name:e.target.value}),placeholder:"Tu nombre completo",className:"pl-10",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"register-email",children:"Correo Electr\xf3nico"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(m.I,{id:"register-email",type:"email",value:y.email,onChange:e=>w({...y,email:e.target.value}),placeholder:"tu@email.com",className:"pl-10",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"register-phone",children:"Tel\xe9fono"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(m.I,{id:"register-phone",value:y.phone,onChange:e=>w({...y,phone:e.target.value}),placeholder:"+1234567890",className:"pl-10",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"register-country",children:"Pa\xeds"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(m.I,{id:"register-country",value:y.country,onChange:e=>w({...y,country:e.target.value}),placeholder:"Pa\xeds",className:"pl-10"})]})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"register-city",children:"Ciudad"}),a.jsx(m.I,{id:"register-city",value:y.city,onChange:e=>w({...y,city:e.target.value}),placeholder:"Ciudad"})]})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"register-password",children:"Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(m.I,{id:"register-password",type:"password",value:y.password,onChange:e=>w({...y,password:e.target.value}),placeholder:"M\xednimo 6 caracteres",className:"pl-10",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx(u._,{htmlFor:"register-confirm-password",children:"Confirmar Contrase\xf1a"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(m.I,{id:"register-confirm-password",type:"password",value:y.confirmPassword,onChange:e=>w({...y,confirmPassword:e.target.value}),placeholder:"Confirma tu contrase\xf1a",className:"pl-10",required:!0})]})]}),a.jsx(d.z,{type:"submit",disabled:e,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:e?"Creando cuenta...":"Crear Cuenta"})]})})]})})]})})}},26434:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(25805).createProxy)(String.raw`C:\Users\BIENV\Downloads\auth-system\app\(front)\login\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[9780,5688,8388,1430,4322,9235,1063],()=>s(31132));module.exports=a})();