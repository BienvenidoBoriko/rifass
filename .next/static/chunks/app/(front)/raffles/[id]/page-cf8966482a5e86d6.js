(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{2284:function(e,a,s){Promise.resolve().then(s.bind(s,8472))},8472:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Z}});var t=s(288),l=s(3320),r=s(5192),n=s(8610),i=s(5415),o=s(1258),c=s(7199),d=s(8357),m=s(7719),u=s(1676),x=s(9205),p=s(3967),h=s(582),f=s(3373),g=s(1782),j=s(3699),v=s(6835),b=s(2608),N=s(1207);function y(e){let{availableTickets:a,loading:s=!1,selectedTickets:l,onSelectionChange:n,pricePerTicket:i,maxTickets:o=10}=e,[c,d]=(0,r.useState)(""),u=e=>{!(l.length>=o)&&!l.includes(e)&&a.includes(e)&&n([...l,e])},x=e=>{n(l.filter(a=>a!==e))},p=e=>{let s=a.filter(e=>!l.includes(e)),t=Math.min(e,o-l.length,s.length);n([...l,...s.sort(()=>.5-Math.random()).slice(0,t)])},h=e=>e.toString().padStart(4,"0");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(j._,{className:"text-base font-semibold text-slate-900",children:["Seleccionar Boletos (",l.length,"/",o,")"]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"Elige tus n\xfameros de la suerte o d\xe9janos seleccionar por ti"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(m.z,{type:"button",variant:"outline",size:"sm",onClick:()=>p(1),disabled:l.length>=o,children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"1 Aleatorio"]}),(0,t.jsxs)(m.z,{type:"button",variant:"outline",size:"sm",onClick:()=>p(5),disabled:l.length>=o-4,children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"5 Aleatorios"]}),(0,t.jsx)(m.z,{type:"button",variant:"outline",size:"sm",onClick:()=>n([]),disabled:0===l.length,children:"Limpiar Todo"})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=parseInt(c);!isNaN(a)&&a>=0&&a<=9999&&(u(a),d(""))},className:"flex gap-2",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(g.I,{type:"number",min:"0",max:"9999",placeholder:"Buscar n\xfamero espec\xedfico (0000-9999)",value:c,onChange:e=>d(e.target.value)})}),(0,t.jsx)(m.z,{type:"submit",disabled:l.length>=o,children:"Agregar"})]}),l.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(j._,{className:"text-sm font-medium text-slate-700",children:"Boletos Seleccionados:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map(e=>(0,t.jsxs)(v.C,{variant:"secondary",className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border-blue-200",children:[h(e),(0,t.jsx)("button",{type:"button",onClick:()=>x(e),className:"ml-2 hover:text-red-600",children:(0,t.jsx)(N.Z,{className:"h-3 w-3"})})]},e))})]}),l.length>0&&i&&(0,t.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-slate-900",children:"Resumen de Compra"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Boletos seleccionados:"}),(0,t.jsx)("span",{className:"font-medium",children:l.length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Precio por boleto:"}),(0,t.jsxs)("span",{children:["$",i]})]}),(0,t.jsx)("div",{className:"border-t pt-2",children:(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsxs)("span",{className:"text-blue-600",children:["$",(l.length*i).toFixed(2)]})]})})]})]}),(0,t.jsxs)("div",{className:"text-sm text-slate-600",children:[(0,t.jsxs)("p",{children:["Boletos disponibles: ",a.length.toLocaleString()]}),(0,t.jsxs)("p",{children:["Boletos vendidos: ",(1e4-a.length).toLocaleString()]})]})]})}var w=s(526),E=s(4175),k=s(6998),P=s(351),_=s(9958),C=s(5876),S=s(6056),A=s(2061);function I(e){let{paymentMethod:a,totalAmount:s,onComplete:l}=e,[n,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(null),[x,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),j=e=>{navigator.clipboard.writeText(e),h.A.success("Informaci\xf3n copiada al portapapeles")},v=async()=>{if(!n.trim()){h.A.error("Por favor ingresa la referencia de pago");return}if(!o){h.A.error("Por favor sube una imagen del comprobante de pago");return}g(!0);try{let e=new FormData;e.append("file",o);let a=await fetch("/api/upload",{method:"POST",body:e});if(!a.ok){let e=await a.json();throw Error(e.error||"Error al subir el archivo")}let s=await a.json();l(n,s.url,x)}catch(e){console.error("Error uploading file:",e),h.A.error(e instanceof Error?e.message:"Error al subir el archivo")}finally{g(!1)}},b=(()=>{switch(a){case"zelle":return{title:"Pago con Zelle",email:A.env.NEXT_PUBLIC_ZELLE_EMAIL||"pagos@autorifapro.com",instructions:["Abre tu app bancaria o Zelle","Env\xeda el pago al email: ".concat(A.env.NEXT_PUBLIC_ZELLE_EMAIL||"pagos@autorifapro.com"),'Usa como concepto: "Boletos AutoRifa"',"Guarda la referencia de la transacci\xf3n","Sube una imagen del comprobante de pago","Ingresa la referencia abajo para confirmar"]};case"paypal":return{title:"Pago con PayPal",email:A.env.NEXT_PUBLIC_PAYPAL_EMAIL||"pagos@autorifapro.com",instructions:["Abre PayPal en tu navegador o app","Env\xeda el pago al email: ".concat(A.env.NEXT_PUBLIC_PAYPAL_EMAIL||"pagos@autorifapro.com"),'Usa como concepto: "Boletos AutoRifa"',"Guarda la referencia de la transacci\xf3n","Sube una imagen del comprobante de pago","Ingresa la referencia abajo para confirmar"]};case"binance":return{title:"Pago con Binance Pay",wallet:A.env.NEXT_PUBLIC_BINANCE_EMAIL||"autorifapro@binance.com",instructions:["Abre Binance Pay en tu app","Env\xeda USDT a: ".concat(A.env.NEXT_PUBLIC_BINANCE_EMAIL||"autorifapro@binance.com"),"Usa la red BSC (BEP20) para menores comisiones","Guarda el hash de la transacci\xf3n","Sube una imagen del comprobante de pago","Ingresa el hash abajo para confirmar"]};case"pago-movil":return{title:"Pago M\xf3vil",bank:A.env.NEXT_PUBLIC_PAGO_MOVIL_BANK||"Banco de Venezuela",phone:A.env.NEXT_PUBLIC_PAGO_MOVIL_PHONE||"0412-1234567",ci:A.env.NEXT_PUBLIC_PAGO_MOVIL_CI||"V-12345678",instructions:["Marca *121# desde tu tel\xe9fono","Selecciona Pago M\xf3vil","Banco: ".concat(A.env.NEXT_PUBLIC_PAGO_MOVIL_BANK||"Banco de Venezuela"),"Tel\xe9fono: ".concat(A.env.NEXT_PUBLIC_PAGO_MOVIL_PHONE||"0412-1234567"),"C\xe9dula: ".concat(A.env.NEXT_PUBLIC_PAGO_MOVIL_CI||"V-12345678"),"Guarda la referencia de la transacci\xf3n","Sube una imagen del comprobante de pago"]};default:return{title:"Procesando pago...",instructions:["Redirigiendo a la pasarela de pago segura..."]}}})();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(u.Zb,{className:"border-blue-200 bg-blue-50",children:[(0,t.jsx)(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center space-x-2 text-blue-800",children:[(()=>{switch(a){case"zelle":return(0,t.jsx)(d.Z,{className:"h-6 w-6"});case"paypal":case"binance":default:return(0,t.jsx)(w.Z,{className:"h-6 w-6"});case"pago-movil":return(0,t.jsx)(E.Z,{className:"h-6 w-6"})}})(),(0,t.jsx)("span",{children:"Resumen de Pago"})]})}),(0,t.jsxs)(u.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Monto a pagar:"}),(0,t.jsxs)("span",{className:"font-semibold",children:["$",s]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[(0,t.jsx)("span",{children:"Total a pagar:"}),(0,t.jsxs)("span",{className:"text-blue-600",children:["$",s]})]})]})]}),(0,t.jsxs)(u.Zb,{children:[(0,t.jsx)(u.Ol,{children:(0,t.jsx)(u.ll,{children:b.title})}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:["zelle"===a&&(0,t.jsx)("div",{className:"bg-slate-50 p-4 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:"Email:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-mono",children:b.email}),(0,t.jsx)(m.z,{variant:"outline",size:"sm",onClick:()=>j(b.email),children:(0,t.jsx)(k.Z,{className:"h-4 w-4"})})]})]})}),"paypal"===a&&(0,t.jsx)("div",{className:"bg-slate-50 p-4 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:"Email:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-mono",children:b.email}),(0,t.jsx)(m.z,{variant:"outline",size:"sm",onClick:()=>j(b.email),children:(0,t.jsx)(k.Z,{className:"h-4 w-4"})})]})]})}),"binance"===a&&(0,t.jsx)("div",{className:"bg-slate-50 p-4 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:"Wallet:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-mono",children:b.wallet}),(0,t.jsx)(m.z,{variant:"outline",size:"sm",onClick:()=>j(b.wallet),children:(0,t.jsx)(k.Z,{className:"h-4 w-4"})})]})]})}),"pago-movil"===a&&(0,t.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:"Banco:"}),(0,t.jsx)("span",{children:b.bank})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:"Tel\xe9fono:"}),(0,t.jsx)("span",{className:"font-mono",children:b.phone})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:"C\xe9dula:"}),(0,t.jsx)("span",{className:"font-mono",children:b.ci})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Instrucciones:"}),(0,t.jsx)("ol",{className:"space-y-2",children:b.instructions.map((e,a)=>(0,t.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium flex-shrink-0",children:a+1}),(0,t.jsx)("span",{className:"text-slate-700",children:e})]},a))})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Comprobante de Pago *"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{id:"payment-proof",type:"file",accept:"image/*",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){let e=(0,S.D0)(s);if(!e.valid){h.A.error(e.error||"Error al validar el archivo");return}c(s),h.A.success("Imagen de comprobante cargada exitosamente")}},className:"hidden"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(m.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("payment-proof"))||void 0===e?void 0:e.click()},className:"flex items-center space-x-2",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Subir Comprobante"})]}),o&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-green-600",children:["✓ ",o.name]}),(0,t.jsx)(m.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>{c(null);let e=document.getElementById("payment-proof");e&&(e.value="")},className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Sube una imagen del comprobante de pago (JPG, PNG, WEBP - m\xe1ximo 5MB)"})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Comentario (opcional)"}),(0,t.jsx)(C.g,{value:x,onChange:e=>p(e.target.value),placeholder:"Agrega alg\xfan comentario o informaci\xf3n adicional sobre tu pago...",rows:3,className:"resize-none"})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Referencia de Pago *"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Ingresa la referencia o hash de la transacci\xf3n",className:"flex-1 px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,t.jsxs)(m.z,{onClick:v,disabled:!n.trim()||!o||f,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4 mr-1"}),f?"Subiendo...":"Confirmar"]})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Una vez enviado el pago, ingresa la referencia y sube el comprobante para que podamos verificar y confirmar tus boletos."})]})]})]}),(0,t.jsx)(u.Zb,{className:"border-yellow-200 bg-yellow-50",children:(0,t.jsxs)(u.aY,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"Notas Importantes:"}),(0,t.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,t.jsxs)("li",{children:["• El pago debe realizarse por el monto exacto: $",s]}),(0,t.jsx)("li",{children:"• Tus boletos ser\xe1n reservados por 30 minutos"}),(0,t.jsx)("li",{children:"• La confirmaci\xf3n puede tomar hasta 24 horas"}),(0,t.jsx)("li",{children:"• Guarda la referencia de pago para futuras consultas"}),(0,t.jsx)("li",{children:"• Es obligatorio subir una imagen del comprobante de pago"})]})]})})]})}var z=s(9258),T=s(8794),B=s(4990);let L=()=>{let{data:e}=(0,B.useSession)(),[a,s]=(0,r.useState)(!1),[t,l]=(0,r.useState)(null);return{purchaseTickets:async a=>{if(!(null==e?void 0:e.user))return l("Please sign in to purchase tickets"),null;s(!0),l(null);try{let e=await fetch("/api/raffles/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let a=await e.json();throw Error(a.error||"Failed to purchase tickets")}return await e.json()}catch(e){return l(e instanceof Error?e.message:"An error occurred"),null}finally{s(!1)}},loading:a,error:t}};function Z(){let e=(0,l.useParams)(),{data:a}=(0,B.useSession)(),[s,g]=(0,r.useState)([]),[j,v]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1),[w,E]=(0,r.useState)(""),[k,P]=(0,r.useState)(null),_=null==e?void 0:e.id;if(!_)return(0,t.jsx)("div",{children:"Raffle not found"});let C=parseInt(_),{raffle:S,loading:A}=(0,T.yk)(C),{tickets:Z,loading:M}=(0,T.p3)(C),{purchaseTickets:O,loading:U}=L(),D=async()=>{if(!(null==a?void 0:a.user)){N(!0);return}if(0===s.length){h.A.error("Debes seleccionar al menos un boleto para continuar.");return}if(!w){h.A.error("Debes seleccionar un m\xe9todo de pago.");return}let e=s.length*((null==S?void 0:S.pricePerTicket)||0);P({ticketNumbers:[...s],totalAmount:e,paymentMethod:w}),v(!0),h.A.success("Completa el pago para confirmar tus boletos. Tienes 30 minutos para completar la transacci\xf3n.")},R=async(e,s,t)=>{if(!(null==a?void 0:a.user)){h.A.error("Debes iniciar sesi\xf3n para completar el pago");return}if(!k){h.A.error("No hay compra pendiente");return}try{console.log("Enviando datos:",{raffleId:C,ticketNumbers:k.ticketNumbers,paymentMethod:k.paymentMethod,paymentReference:e,paymentProof:s,paymentComment:t});let a=await fetch("/api/raffles/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({raffleId:C,ticketNumbers:k.ticketNumbers,paymentMethod:k.paymentMethod,paymentReference:e,paymentProof:s,paymentComment:t})});if(!a.ok){let e=await a.json();throw Error(e.error||"Error al procesar el pago")}let l=await a.json();console.log("Respuesta del servidor:",l),h.A.success("Tu pago ha sido enviado. Recibir\xe1s una confirmaci\xf3n por email."),v(!1),g([]),P(null),E("")}catch(e){console.error("Error completing payment:",e),h.A.error(e instanceof Error?e.message:"Error al procesar el pago")}};if(A)return(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-8",children:[(0,t.jsx)("div",{className:"bg-slate-200 h-8 rounded w-1/2"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsx)("div",{className:"bg-slate-200 h-96 rounded"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"bg-slate-200 h-4 rounded w-3/4"}),(0,t.jsx)("div",{className:"bg-slate-200 h-4 rounded w-1/2"})]})]})]})});if(!S)return(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Rifa no encontrada"}),(0,t.jsx)("p",{className:"text-slate-600",children:"La rifa que buscas no existe o ha sido eliminada."})]})});let G=S.soldTickets/S.totalTickets*100,V=Math.ceil((new Date(S.endDate).getTime()-new Date().getTime())/864e5);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:S.title}),(0,t.jsx)("p",{className:"text-xl text-slate-600",children:S.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:S.imageUrl||"/placeholder-car.jpg",alt:S.title,className:"w-full h-96 object-cover rounded-lg"}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1 rounded-full text-sm font-semibold",children:["$",S.pricePerTicket,"/boleto"]})]}),S.galleryImages&&S.galleryImages.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:S.galleryImages.slice(0,3).map((e,a)=>(0,t.jsx)("img",{src:e,alt:"".concat(S.title," ").concat(a+1),className:"w-full h-24 object-cover rounded"},a))})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(u.Zb,{children:[(0,t.jsx)(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Z,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"Informaci\xf3n de la Rifa"})]})}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4 text-slate-500"}),(0,t.jsx)("span",{className:"text-sm text-slate-600",children:V>0?"".concat(V," d\xedas restantes"):"\xdaltimo d\xeda"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 text-slate-500"}),(0,t.jsxs)("span",{className:"text-sm text-slate-600",children:[S.soldTickets,"/",S.totalTickets," vendidos"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-slate-600 mb-1",children:[(0,t.jsx)("span",{children:"Progreso de venta"}),(0,t.jsxs)("span",{children:[G.toFixed(1),"%"]})]}),(0,t.jsx)(p.E,{value:G,className:"h-2"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Sorteo: ",new Date(S.drawDate).toLocaleDateString()]})]})]})]}),(0,t.jsxs)(u.Zb,{children:[(0,t.jsx)(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.Z,{className:"h-5 w-5 text-red-500"}),(0,t.jsx)("span",{children:"Tiempo Restante"})]})}),(0,t.jsx)(u.aY,{children:(0,t.jsx)(f.Z,{endDate:new Date(S.endDate)})})]}),j?k&&(0,t.jsx)(I,{onComplete:R,totalAmount:k.totalAmount,paymentMethod:k.paymentMethod}):(0,t.jsxs)(u.Zb,{children:[(0,t.jsx)(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"Comprar Boletos"})]})}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"M\xe9todo de Pago"}),(0,t.jsxs)(x.Ph,{value:w,onValueChange:E,children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{placeholder:"Selecciona m\xe9todo de pago"})}),(0,t.jsxs)(x.Bw,{children:[(0,t.jsx)(x.Ql,{value:"zelle",children:"Zelle"}),(0,t.jsx)(x.Ql,{value:"paypal",children:"PayPal"}),(0,t.jsx)(x.Ql,{value:"binance",children:"Binance Pay"}),(0,t.jsx)(x.Ql,{value:"pago-movil",children:"Pago M\xf3vil"})]})]})]}),(0,t.jsx)(y,{availableTickets:Z,loading:M,selectedTickets:s,onSelectionChange:g,pricePerTicket:S.pricePerTicket}),(0,t.jsx)(m.z,{onClick:D,disabled:U||0===s.length,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:U?"Procesando...":"Continuar con el Pago"})]})]})]})]})]}),(0,t.jsx)(z.Z,{isOpen:b,onClose:()=>N(!1)})]})}},3373:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});var t=s(288),l=s(5192);function r(e){let{endDate:a,className:s=""}=e,[r,n]=(0,l.useState)({days:0,hours:0,minutes:0,seconds:0});return(0,l.useEffect)(()=>{let e=setInterval(()=>{let e=new Date().getTime(),s=new Date(a).getTime()-e;s>0?n({days:Math.floor(s/864e5),hours:Math.floor(s%864e5/36e5),minutes:Math.floor(s%36e5/6e4),seconds:Math.floor(s%6e4/1e3)}):n({days:0,hours:0,minutes:0,seconds:0})},1e3);return()=>clearInterval(e)},[a]),(0,t.jsxs)("div",{className:"flex space-x-4 ".concat(s),children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-3 min-w-[60px]",children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:r.days})}),(0,t.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:"D\xedas"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-3 min-w-[60px]",children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:r.hours})}),(0,t.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:"Horas"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-3 min-w-[60px]",children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:r.minutes})}),(0,t.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:"Min"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-3 min-w-[60px]",children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:r.seconds})}),(0,t.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:"Seg"})]})]})}},6835:function(e,a,s){"use strict";s.d(a,{C:function(){return o}});var t=s(288);s(5192);var l=s(8996),r=s(7940),n=s(6056);let i=(0,r.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:s,asChild:r=!1,...o}=e,c=r?l.g7:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(i({variant:s}),a),...o})}},3967:function(e,a,s){"use strict";s.d(a,{E:function(){return n}});var t=s(288);s(5192);var l=s(1229),r=s(6056);function n(e){let{className:a,value:s,...n}=e;return(0,t.jsx)(l.fC,{"data-slot":"progress",className:(0,r.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...n,children:(0,t.jsx)(l.z$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})}},9205:function(e,a,s){"use strict";s.d(a,{Bw:function(){return u},Ph:function(){return c},Ql:function(){return x},i4:function(){return m},ki:function(){return d}});var t=s(288);s(5192);var l=s(6981),r=s(9590),n=s(7962),i=s(4773),o=s(6056);function c(e){let{...a}=e;return(0,t.jsx)(l.fC,{"data-slot":"select",...a})}function d(e){let{...a}=e;return(0,t.jsx)(l.B4,{"data-slot":"select-value",...a})}function m(e){let{className:a,size:s="default",children:n,...i}=e;return(0,t.jsxs)(l.xz,{"data-slot":"select-trigger","data-size":s,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...i,children:[n,(0,t.jsx)(l.JO,{asChild:!0,children:(0,t.jsx)(r.Z,{className:"size-4 opacity-50"})})]})}function u(e){let{className:a,children:s,position:r="popper",...n}=e;return(0,t.jsx)(l.h_,{children:(0,t.jsxs)(l.VY,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...n,children:[(0,t.jsx)(p,{}),(0,t.jsx)(l.l_,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,t.jsx)(h,{})]})})}function x(e){let{className:a,children:s,...r}=e;return(0,t.jsxs)(l.ck,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...r,children:[(0,t.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,t.jsx)(l.wU,{children:(0,t.jsx)(n.Z,{className:"size-4"})})}),(0,t.jsx)(l.eT,{children:s})]})}function p(e){let{className:a,...s}=e;return(0,t.jsx)(l.u_,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,t.jsx)(i.Z,{className:"size-4"})})}function h(e){let{className:a,...s}=e;return(0,t.jsx)(l.$G,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,t.jsx)(r.Z,{className:"size-4"})})}},5876:function(e,a,s){"use strict";s.d(a,{g:function(){return r}});var t=s(288);s(5192);var l=s(6056);function r(e){let{className:a,...s}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,l.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...s})}},8794:function(e,a,s){"use strict";s.d(a,{BM:function(){return l},Uv:function(){return r},p3:function(){return i},yk:function(){return n}});var t=s(5192);let l=()=>{let[e,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),[r,n]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async function(){try{let e=await fetch("/api/raffles/active");if(!e.ok)throw Error("Failed to fetch raffles");let s=await e.json();a(s.raffles)}catch(e){n(e instanceof Error?e.message:"An error occurred")}finally{l(!1)}})()},[]),{raffles:e,loading:s,error:r,refetch:()=>window.location.reload()}},r=()=>{let[e,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),[r,n]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async function(){try{let e=await fetch("/api/winners");if(!e.ok)throw Error("Failed to fetch winners");let s=await e.json();a(s.winners)}catch(e){n(e instanceof Error?e.message:"An error occurred")}finally{l(!1)}})()},[]),{winners:e,loading:s,error:r,refetch:()=>window.location.reload()}},n=e=>{let[a,s]=(0,t.useState)(null),[l,r]=(0,t.useState)(!0),[n,i]=(0,t.useState)(null);return(0,t.useEffect)(()=>{async function a(){try{let a=await fetch("/api/raffles/".concat(e));if(!a.ok){if(404===a.status)throw Error("Raffle not found");throw Error("Failed to fetch raffle")}let t=await a.json();s(t)}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{r(!1)}}e&&a()},[e]),{raffle:a,loading:l,error:n}},i=e=>{let[a,s]=(0,t.useState)([]),[l,r]=(0,t.useState)(!0),[n,i]=(0,t.useState)(null);return(0,t.useEffect)(()=>{async function a(){try{let a=await fetch("/api/raffles/".concat(e,"/available-tickets"));if(!a.ok)throw Error("Failed to fetch available tickets");let t=await a.json();s(t.availableTickets)}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{r(!1)}}e&&a()},[e]),{tickets:a,loading:l,error:n,refetch:()=>window.location.reload()}}}},function(e){e.O(0,[376,474,990,582,792,270,954,258,24,240,744],function(){return e(e.s=2284)}),_N_E=e.O()}]);