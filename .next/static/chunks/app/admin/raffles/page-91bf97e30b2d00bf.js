(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{8312:function(e,a,s){Promise.resolve().then(s.bind(s,1678))},1678:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return _}});var t=s(288),r=s(5192),l=s(2608),i=s(9618),n=s(9392),c=s(7522),d=s(9922),o=s(5635),u=s(7559),m=s(2203),x=s(545),h=s(1676),f=s(7719),p=s(1782),j=s(6835),v=s(2553),g=s(4845),N=s(582),b=s(3479),y=s(1207),w=s(8357);let k=(0,s(6021).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var C=s(5415),D=s(351),S=s(3699),z=s(5876),Z=s(9205);function T(e){let{raffle:a,onSave:s,onCancel:l,isLoading:i=!1}=e,[n,c]=(0,r.useState)({title:"",description:"",imageUrl:"",pricePerTicket:0,totalTickets:1e4,startDate:"",endDate:"",drawDate:"",status:"active"}),[d,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{a&&(c({title:a.title,description:a.description,imageUrl:a.imageUrl||"",pricePerTicket:a.pricePerTicket,totalTickets:a.totalTickets,startDate:a.startDate.split("T")[0],endDate:a.endDate.split("T")[0],drawDate:a.drawDate.split("T")[0],status:a.status}),o(a.imageUrl))},[a]);let u=(e,a)=>{c(s=>({...s,[e]:a}))};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(h.Zb,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(h.Ol,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(h.ll,{children:a?"Editar Rifa":"Crear Nueva Rifa"}),(0,t.jsx)(f.z,{variant:"ghost",size:"sm",onClick:l,children:(0,t.jsx)(y.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)(h.aY,{children:(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n.title.trim()){N.A.error("El t\xedtulo es requerido");return}if(!n.description.trim()){N.A.error("La descripci\xf3n es requerida");return}if(n.pricePerTicket<=0){N.A.error("El precio por boleto debe ser mayor a 0");return}if(n.totalTickets<=0){N.A.error("El n\xfamero total de boletos debe ser mayor a 0");return}if(!n.startDate||!n.endDate||!n.drawDate){N.A.error("Todas las fechas son requeridas");return}let a=new Date(n.startDate),t=new Date(n.endDate),r=new Date(n.drawDate);if(t<=a){N.A.error("La fecha de fin debe ser posterior a la fecha de inicio");return}if(r<=t){N.A.error("La fecha de sorteo debe ser posterior a la fecha de fin");return}s({...n,startDate:a.toISOString(),endDate:t.toISOString(),drawDate:r.toISOString()})},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S._,{htmlFor:"title",children:"T\xedtulo de la Rifa *"}),(0,t.jsx)(p.I,{id:"title",value:n.title,onChange:e=>u("title",e.target.value),placeholder:"Ej: Toyota Corolla 2024",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S._,{htmlFor:"status",children:"Estado"}),(0,t.jsxs)(Z.Ph,{value:n.status,onValueChange:e=>u("status",e),children:[(0,t.jsx)(Z.i4,{children:(0,t.jsx)(Z.ki,{})}),(0,t.jsxs)(Z.Bw,{children:[(0,t.jsx)(Z.Ql,{value:"active",children:"Activa"}),(0,t.jsx)(Z.Ql,{value:"closed",children:"Cerrada"}),(0,t.jsx)(Z.Ql,{value:"drawn",children:"Sorteada"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S._,{htmlFor:"description",children:"Descripci\xf3n *"}),(0,t.jsx)(z.g,{id:"description",value:n.description,onChange:e=>u("description",e.target.value),placeholder:"Describe el premio, caracter\xedsticas del veh\xedculo, etc.",rows:4,required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(S._,{htmlFor:"pricePerTicket",className:"flex items-center",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4 mr-1"}),"Precio por Boleto *"]}),(0,t.jsx)(p.I,{id:"pricePerTicket",type:"number",min:"1",value:n.pricePerTicket,onChange:e=>u("pricePerTicket",parseFloat(e.target.value)||0),placeholder:"25.00",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(S._,{htmlFor:"totalTickets",className:"flex items-center",children:[(0,t.jsx)(k,{className:"h-4 w-4 mr-1"}),"Total de Boletos *"]}),(0,t.jsx)(p.I,{id:"totalTickets",type:"number",min:"1",max:"10000",value:n.totalTickets,onChange:e=>u("totalTickets",parseInt(e.target.value)||0),placeholder:"10000",required:!0}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:["N\xfameros del 0000 al"," ",(n.totalTickets-1).toString().padStart(4,"0")]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S._,{children:"Valor Total del Premio"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",(n.pricePerTicket*n.totalTickets).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(S._,{htmlFor:"startDate",className:"flex items-center",children:[(0,t.jsx)(C.Z,{className:"h-4 w-4 mr-1"}),"Fecha de Inicio *"]}),(0,t.jsx)(p.I,{id:"startDate",type:"date",value:n.startDate,onChange:e=>u("startDate",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(S._,{htmlFor:"endDate",className:"flex items-center",children:[(0,t.jsx)(C.Z,{className:"h-4 w-4 mr-1"}),"Fecha de Fin *"]}),(0,t.jsx)(p.I,{id:"endDate",type:"date",value:n.endDate,onChange:e=>u("endDate",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(S._,{htmlFor:"drawDate",className:"flex items-center",children:[(0,t.jsx)(C.Z,{className:"h-4 w-4 mr-1"}),"Fecha de Sorteo *"]}),(0,t.jsx)(p.I,{id:"drawDate",type:"date",value:n.drawDate,onChange:e=>u("drawDate",e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S._,{children:"Imagen del Premio"}),(0,t.jsx)("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center",children:d?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("img",{src:d,alt:"Preview",className:"max-w-full h-48 object-cover rounded-lg mx-auto"}),(0,t.jsx)(f.z,{type:"button",variant:"outline",onClick:()=>{o(null),c(e=>({...e,imageUrl:""}))},children:"Cambiar Imagen"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(D.Z,{className:"h-12 w-12 text-slate-400 mx-auto"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-600",children:"Arrastra una imagen aqu\xed o haz clic para seleccionar"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"PNG, JPG hasta 5MB"})]}),(0,t.jsx)(p.I,{type:"file",accept:"image/*",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){let e=new FileReader;e.onload=e=>{var a;let s=null===(a=e.target)||void 0===a?void 0:a.result;o(s),c(e=>({...e,imageUrl:s}))},e.readAsDataURL(s)}},className:"hidden",id:"image-upload"}),(0,t.jsx)(f.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},children:"Seleccionar Imagen"})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,t.jsx)(f.z,{type:"button",variant:"outline",onClick:l,children:"Cancelar"}),(0,t.jsx)(f.z,{type:"submit",disabled:i,children:i?"Guardando...":a?"Actualizar Rifa":"Crear Rifa"})]})]})})]})})}var E=s(7992);function A(e){let{raffle:a,onAssign:s,onCancel:l,isLoading:n=!1}=e,[c,d]=(0,r.useState)(null),[o,m]=(0,r.useState)(""),[x,j]=(0,r.useState)([]),[v,g]=(0,r.useState)(!1),[b,w]=(0,r.useState)({winnerName:"",winnerEmail:"",winnerPhone:"",ticketNumber:0,videoUrl:"",claimed:!1});(0,r.useEffect)(()=>{let e=async()=>{g(!0);try{let e=await fetch("/api/admin/raffles/".concat(a.id,"/tickets"));if(!e.ok)throw Error("Failed to fetch tickets");let s=await e.json();j(s.tickets||[])}catch(e){console.error("Error fetching tickets:",e),N.A.error("Error al cargar los boletos")}finally{g(!1)}};a.id&&e()},[a.id]);let k=x.filter(e=>e.buyerName.toLowerCase().includes(o.toLowerCase())||e.buyerEmail.toLowerCase().includes(o.toLowerCase())||e.ticketNumber.toString().includes(o)),C=e=>{d(e.id),w({winnerName:e.buyerName,winnerEmail:e.buyerEmail,winnerPhone:e.buyerPhone||"",ticketNumber:e.ticketNumber,videoUrl:"",claimed:!1})};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(h.Zb,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(h.Ol,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(h.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(u.Z,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsxs)("span",{children:["Asignar Ganador - ",a.title]})]}),(0,t.jsx)(f.z,{variant:"ghost",size:"sm",onClick:l,children:(0,t.jsx)(y.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)(h.aY,{children:(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!c){N.A.error("Debes seleccionar un boleto ganador");return}if(!b.winnerName.trim()){N.A.error("El nombre del ganador es requerido");return}if(!b.winnerEmail.trim()){N.A.error("El email del ganador es requerido");return}s({raffleId:a.id,...b})},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Informaci\xf3n de la Rifa"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Total de Boletos:"})," ",a.totalTickets]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Boletos Vendidos:"})," ",x.length]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Porcentaje Vendido:"})," ",a.totalTickets>0?(x.length/a.totalTickets*100).toFixed(1):"0","%"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(S._,{children:"Seleccionar Boleto Ganador"}),(0,t.jsxs)("div",{className:"relative mt-2",children:[(0,t.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),(0,t.jsx)(p.I,{placeholder:"Buscar por nombre, email o n\xfamero...",value:o,onChange:e=>m(e.target.value),className:"pl-10"})]})]}),(0,t.jsx)("div",{className:"border border-slate-200 rounded-lg max-h-96 overflow-y-auto",children:v?(0,t.jsx)("div",{className:"p-4 text-center text-slate-500",children:"Cargando boletos..."}):0===k.length?(0,t.jsx)("div",{className:"p-4 text-center text-slate-500",children:0===x.length?"No hay boletos confirmados para esta rifa":"No se encontraron boletos que coincidan con la b\xfasqueda"}):(0,t.jsx)("div",{className:"divide-y",children:k.map(e=>(0,t.jsx)("div",{className:"p-4 cursor-pointer hover:bg-slate-50 transition-colors ".concat(c===e.id?"bg-blue-50 border-l-4 border-blue-500":""),onClick:()=>C(e),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)(E.Z,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)("span",{className:"font-mono font-semibold",children:["#",e.ticketNumber.toString().padStart(4,"0")]})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:e.buyerName}),(0,t.jsx)("div",{className:"text-slate-600",children:e.buyerEmail})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs text-slate-500",children:e.buyerPhone||"Sin tel\xe9fono"}),(0,t.jsx)("div",{className:"text-xs px-2 py-1 rounded-full ".concat("confirmed"===e.paymentStatus?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"confirmed"===e.paymentStatus?"Confirmado":"Pendiente"})]})]})},e.id))})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-900",children:"Detalles del Ganador"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(S._,{htmlFor:"winnerName",children:"Nombre del Ganador *"}),(0,t.jsx)(p.I,{id:"winnerName",value:b.winnerName,onChange:e=>w(a=>({...a,winnerName:e.target.value})),placeholder:"Nombre completo del ganador",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S._,{htmlFor:"winnerEmail",children:"Email del Ganador *"}),(0,t.jsx)(p.I,{id:"winnerEmail",type:"email",value:b.winnerEmail,onChange:e=>w(a=>({...a,winnerEmail:e.target.value})),placeholder:"email@ejemplo.com",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S._,{htmlFor:"winnerPhone",children:"Tel\xe9fono del Ganador"}),(0,t.jsx)(p.I,{id:"winnerPhone",value:b.winnerPhone,onChange:e=>w(a=>({...a,winnerPhone:e.target.value})),placeholder:"+58 412-123-4567"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S._,{htmlFor:"videoUrl",children:"URL del Video del Sorteo"}),(0,t.jsx)(p.I,{id:"videoUrl",value:b.videoUrl,onChange:e=>w(a=>({...a,videoUrl:e.target.value})),placeholder:"https://youtube.com/watch?v=..."})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"claimed",checked:b.claimed,onChange:e=>w(a=>({...a,claimed:e.target.checked})),className:"rounded"}),(0,t.jsx)(S._,{htmlFor:"claimed",children:"Premio Reclamado"})]})]}),c&&(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-green-800",children:[(0,t.jsx)(u.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-semibold",children:"Boleto Ganador Seleccionado"})]}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-green-700",children:[(0,t.jsxs)("div",{children:["N\xfamero:"," ",(0,t.jsxs)("span",{className:"font-mono font-bold",children:["#",b.ticketNumber.toString().padStart(4,"0")]})]}),(0,t.jsxs)("div",{children:["Comprador: ",b.winnerName]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,t.jsx)(f.z,{type:"button",variant:"outline",onClick:l,children:"Cancelar"}),(0,t.jsx)(f.z,{type:"submit",disabled:n||!c,className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",children:n?"Asignando...":"Asignar Ganador"})]})]})})]})})}function _(){let[e,a]=(0,r.useState)(""),[s,y]=(0,r.useState)(null),[w,k]=(0,r.useState)(!0),[C,D]=(0,r.useState)(null),[S,z]=(0,r.useState)(!1),[Z,E]=(0,r.useState)(null),[_,P]=(0,r.useState)(!1),[F,I]=(0,r.useState)(null),[q,R]=(0,r.useState)(null),[L,U]=(0,r.useState)(!1),[M,G]=(0,r.useState)(!1),B=async()=>{try{k(!0);let e=await b.N.listAllRaffles();y(e)}catch(e){console.error("Error fetching raffles:",e),N.A.error("No se pudieron cargar las rifas.")}finally{k(!1)}};(0,r.useEffect)(()=>{B()},[]);let O=async(e,a)=>{try{D(e),await b.N.updateRaffleStatus({raffleId:e,status:a}),N.A.success("El estado de la rifa ha sido actualizado."),await B()}catch(e){console.error("Update status error:",e),N.A.error("No se pudo actualizar el estado.")}finally{D(null)}},V=e=>{E(e),z(!0)},Y=e=>{R(e)},H=async()=>{if(q)try{await b.N.deleteRaffle(q.id),N.A.success("La rifa ha sido eliminada exitosamente."),await B()}catch(e){console.error("Delete raffle error:",e),N.A.error("No se pudo eliminar la rifa.")}finally{R(null)}},$=async e=>{try{U(!0),Z?(await b.N.updateRaffle(Z.id,e),N.A.success("La rifa ha sido actualizada exitosamente.")):(await b.N.createRaffle(e),N.A.success("La rifa ha sido creada exitosamente.")),z(!1),E(null),await B()}catch(e){console.error("Save raffle error:",e),N.A.error("No se pudo guardar la rifa.")}finally{U(!1)}},Q=e=>{I(e),P(!0)},X=async e=>{try{G(!0),await b.N.assignWinner(e),N.A.success("El ganador ha sido asignado exitosamente."),P(!1),I(null),await B()}catch(e){console.error("Assign winner error:",e),N.A.error("No se pudo asignar el ganador.")}finally{G(!1)}},W=(null==s?void 0:s.raffles.filter(a=>a.title.toLowerCase().includes(e.toLowerCase())))||[],J=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"drawn":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},K=e=>{switch(e){case"active":return"Activa";case"closed":return"Cerrada";case"drawn":return"Sorteada";default:return e}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Gesti\xf3n de Rifas"}),(0,t.jsx)("p",{className:"text-slate-600",children:"Administra todas las rifas de la plataforma"})]}),(0,t.jsxs)(f.z,{className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",onClick:()=>{E(null),z(!0)},children:[(0,t.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Nueva Rifa"]})]}),(0,t.jsx)(h.Zb,{children:(0,t.jsx)(h.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),(0,t.jsx)(p.I,{placeholder:"Buscar rifas...",value:e,onChange:e=>a(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(f.z,{variant:"outline",className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Filtros"})]})]})})}),(0,t.jsxs)(h.Zb,{children:[(0,t.jsx)(h.Ol,{children:(0,t.jsxs)(h.ll,{children:["Todas las Rifas (",W.length,")"]})}),(0,t.jsx)(h.aY,{children:w?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"bg-slate-200 h-16 rounded"})},a))}):0===W.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"bg-slate-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(i.Z,{className:"h-8 w-8 text-slate-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No se encontraron rifas"}),(0,t.jsx)("p",{className:"text-slate-600",children:e?"Intenta con otros t\xe9rminos de b\xfasqueda":"A\xfan no hay rifas creadas"})]}):(0,t.jsx)("div",{className:"space-y-4",children:W.map(e=>(0,t.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("img",{src:e.imageUrl||"/placeholder-car.jpg",alt:e.title,className:"w-16 h-16 object-cover rounded-lg"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-900",children:e.title}),(0,t.jsx)(j.C,{className:J(e.status),children:K(e.status)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-slate-600",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Precio:"})," $",e.pricePerTicket]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Vendidos:"})," ",e.soldTickets,"/",e.totalTickets]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Fin:"})," ",new Date(e.endDate).toLocaleDateString()]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Sorteo:"})," ",new Date(e.drawDate).toLocaleDateString()]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.z,{variant:"outline",size:"sm",children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})}),(0,t.jsx)(f.z,{variant:"outline",size:"sm",onClick:()=>V(e),children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})}),(0,t.jsxs)(v.h_,{children:[(0,t.jsx)(v.$F,{asChild:!0,children:(0,t.jsx)("div",{className:"flex items-center p-2 bg-white rounded-md shadow-sm",children:(0,t.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(v.AW,{align:"end",children:["active"===e.status&&(0,t.jsx)(v.Xi,{onClick:()=>O(e.id,"closed"),disabled:C===e.id,children:C===e.id?"Cerrando...":"Cerrar Rifa"}),"closed"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Xi,{onClick:()=>O(e.id,"drawn"),disabled:C===e.id,children:C===e.id?"Actualizando...":"Marcar como Sorteada"}),(0,t.jsxs)(v.Xi,{onClick:()=>Q(e),children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Asignar Ganador"]})]}),(0,t.jsx)(v.VD,{}),(0,t.jsxs)(v.Xi,{className:"text-red-600",onClick:()=>Y(e),children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]})]})]})},e.id))})})]})]}),S&&(0,t.jsx)(T,{raffle:Z||void 0,onSave:$,onCancel:()=>{z(!1),E(null)},isLoading:L}),_&&F&&(0,t.jsx)(A,{raffle:F,onAssign:X,onCancel:()=>{P(!1),I(null)},isLoading:M}),(0,t.jsx)(g.aR,{open:!!q,onOpenChange:()=>R(null),children:(0,t.jsxs)(g._T,{children:[(0,t.jsxs)(g.fY,{children:[(0,t.jsxs)(g.f$,{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5 text-red-500"}),(0,t.jsx)("span",{children:"\xbfEliminar Rifa?"})]}),(0,t.jsxs)(g.yT,{children:['\xbfEst\xe1s seguro de que quieres eliminar la rifa "',null==q?void 0:q.title,'"? Esta acci\xf3n no se puede deshacer y eliminar\xe1 todos los datos asociados.']})]}),(0,t.jsxs)(g.xo,{children:[(0,t.jsx)(g.le,{children:"Cancelar"}),(0,t.jsx)(g.OL,{onClick:H,className:"bg-red-600 hover:bg-red-700",children:"Eliminar"})]})]})})]})}},3699:function(e,a,s){"use strict";s.d(a,{_:function(){return i}});var t=s(288);s(5192);var r=s(482),l=s(6056);function i(e){let{className:a,...s}=e;return(0,t.jsx)(r.f,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...s})}},9205:function(e,a,s){"use strict";s.d(a,{Bw:function(){return m},Ph:function(){return d},Ql:function(){return x},i4:function(){return u},ki:function(){return o}});var t=s(288);s(5192);var r=s(6981),l=s(9590),i=s(7962),n=s(4773),c=s(6056);function d(e){let{...a}=e;return(0,t.jsx)(r.fC,{"data-slot":"select",...a})}function o(e){let{...a}=e;return(0,t.jsx)(r.B4,{"data-slot":"select-value",...a})}function u(e){let{className:a,size:s="default",children:i,...n}=e;return(0,t.jsxs)(r.xz,{"data-slot":"select-trigger","data-size":s,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...n,children:[i,(0,t.jsx)(r.JO,{asChild:!0,children:(0,t.jsx)(l.Z,{className:"size-4 opacity-50"})})]})}function m(e){let{className:a,children:s,position:l="popper",...i}=e;return(0,t.jsx)(r.h_,{children:(0,t.jsxs)(r.VY,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,t.jsx)(h,{}),(0,t.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,t.jsx)(f,{})]})})}function x(e){let{className:a,children:s,...l}=e;return(0,t.jsxs)(r.ck,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...l,children:[(0,t.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(i.Z,{className:"size-4"})})}),(0,t.jsx)(r.eT,{children:s})]})}function h(e){let{className:a,...s}=e;return(0,t.jsx)(r.u_,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,t.jsx)(n.Z,{className:"size-4"})})}function f(e){let{className:a,...s}=e;return(0,t.jsx)(r.$G,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,t.jsx)(l.Z,{className:"size-4"})})}},5876:function(e,a,s){"use strict";s.d(a,{g:function(){return l}});var t=s(288);s(5192);var r=s(6056);function l(e){let{className:a,...s}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...s})}},5415:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6021).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8357:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6021).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5635:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6021).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},2608:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6021).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7992:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6021).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},351:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6021).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},482:function(e,a,s){"use strict";s.d(a,{f:function(){return n}});var t=s(5192),r=s(7035),l=s(288),i=t.forwardRef((e,a)=>(0,l.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var n=i}},function(e){e.O(0,[376,474,582,792,270,504,304,123,24,240,744],function(){return e(e.s=8312)}),_N_E=e.O()}]);