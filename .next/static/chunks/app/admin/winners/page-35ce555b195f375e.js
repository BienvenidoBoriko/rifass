(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[825],{5924:function(e,s,l){Promise.resolve().then(l.bind(l,4690))},4690:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return y}});var a=l(288),n=l(5192),i=l(7559),t=l(9958),r=l(1207),c=l(6463),d=l(9618),o=l(9392),x=l(7522),m=l(9922),h=l(2203),j=l(545),u=l(1676),f=l(7719),N=l(1782),p=l(6835),v=l(2553),g=l(4845),w=l(582),b=l(3479);function y(){let[e,s]=(0,n.useState)(""),[l,y]=(0,n.useState)(null),[Z,C]=(0,n.useState)(!0),[E,k]=(0,n.useState)(null),z=async()=>{try{C(!0);let e=await b.N.getWinners();y(e)}catch(e){console.error("Error fetching winners:",e),w.A.error("No se pudieron cargar los ganadores.")}finally{C(!1)}};(0,n.useEffect)(()=>{z()},[]);let L=e=>{k(e)},_=async()=>{if(E)try{w.A.success("El ganador ha sido eliminado exitosamente."),await z()}catch(e){console.error("Delete winner error:",e),w.A.error("No se pudo eliminar el ganador.")}finally{k(null)}},A=(null==l?void 0:l.winners.filter(s=>s.winnerName.toLowerCase().includes(e.toLowerCase())||s.winnerEmail.toLowerCase().includes(e.toLowerCase())||s.raffleTitle.toLowerCase().includes(e.toLowerCase())))||[],S=e=>e.toString().padStart(4,"0");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Gesti\xf3n de Ganadores"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Administra todos los ganadores de las rifas"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(u.Zb,{children:(0,a.jsx)(u.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Total Ganadores"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:(null==l?void 0:l.winners.length)||0})]}),(0,a.jsx)("div",{className:"bg-yellow-100 p-3 rounded-full",children:(0,a.jsx)(i.Z,{className:"h-6 w-6 text-yellow-600"})})]})})}),(0,a.jsx)(u.Zb,{children:(0,a.jsx)(u.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Premios Reclamados"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:(null==l?void 0:l.winners.filter(e=>e.claimed).length)||0})]}),(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,a.jsx)(t.Z,{className:"h-6 w-6 text-green-600"})})]})})}),(0,a.jsx)(u.Zb,{children:(0,a.jsx)(u.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Pendientes de Reclamar"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:(null==l?void 0:l.winners.filter(e=>!e.claimed).length)||0})]}),(0,a.jsx)("div",{className:"bg-yellow-100 p-3 rounded-full",children:(0,a.jsx)(r.Z,{className:"h-6 w-6 text-yellow-600"})})]})})}),(0,a.jsx)(u.Zb,{children:(0,a.jsx)(u.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Con Videos"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:(null==l?void 0:l.winners.filter(e=>e.videoUrl).length)||0})]}),(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,a.jsx)(c.Z,{className:"h-6 w-6 text-blue-600"})})]})})})]}),(0,a.jsx)(u.Zb,{children:(0,a.jsx)(u.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),(0,a.jsx)(N.I,{placeholder:"Buscar por nombre, email o rifa...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(f.z,{variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Filtros"})]})]})})}),(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsxs)(u.ll,{children:["Todos los Ganadores (",A.length,")"]})}),(0,a.jsx)(u.aY,{children:Z?(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"bg-slate-200 h-20 rounded"})},s))}):0===A.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"bg-slate-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(i.Z,{className:"h-8 w-8 text-slate-400"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No se encontraron ganadores"}),(0,a.jsx)("p",{className:"text-slate-600",children:e?"Intenta con otros t\xe9rminos de b\xfasqueda":"A\xfan no hay ganadores registrados"})]}):(0,a.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,a.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 w-12 h-12 rounded-full flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:e.winnerName}),(0,a.jsx)(p.C,{variant:e.claimed?"default":"secondary",className:e.claimed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:e.claimed?"Reclamado":"Pendiente"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-slate-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Rifa:"})," ",e.raffleTitle]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Email:"})," ",e.winnerEmail]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Boleto:"})," ",(0,a.jsxs)("span",{className:"font-mono font-semibold text-blue-600",children:["#",S(e.ticketNumber)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Fecha:"})," ",new Date(e.drawDate).toLocaleDateString()]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.videoUrl&&(0,a.jsx)(f.z,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)("a",{href:e.videoUrl,target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(f.z,{variant:"outline",size:"sm",children:(0,a.jsx)(x.Z,{className:"h-4 w-4"})}),(0,a.jsx)(f.z,{variant:"outline",size:"sm",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(v.h_,{children:[(0,a.jsx)(v.$F,{asChild:!0,children:(0,a.jsx)(f.z,{variant:"outline",size:"sm",children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(v.AW,{align:"end",children:(0,a.jsxs)(v.Xi,{className:"text-red-600",onClick:()=>L(e),children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Eliminar Ganador"]})})]})]})]})},e.id))})})]})]}),(0,a.jsx)(g.aR,{open:!!E,onOpenChange:()=>k(null),children:(0,a.jsxs)(g._T,{children:[(0,a.jsxs)(g.fY,{children:[(0,a.jsxs)(g.f$,{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("span",{children:"\xbfEliminar Ganador?"})]}),(0,a.jsxs)(g.yT,{children:['\xbfEst\xe1s seguro de que quieres eliminar al ganador "',null==E?void 0:E.winnerName,'"? Esta acci\xf3n no se puede deshacer.']})]}),(0,a.jsxs)(g.xo,{children:[(0,a.jsx)(g.le,{children:"Cancelar"}),(0,a.jsx)(g.OL,{onClick:_,className:"bg-red-600 hover:bg-red-700",children:"Eliminar"})]})]})})]})}},9958:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});let a=(0,l(6021).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6463:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});let a=(0,l(6021).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])}},function(e){e.O(0,[376,474,582,792,504,304,123,24,240,744],function(){return e(e.s=5924)}),_N_E=e.O()}]);